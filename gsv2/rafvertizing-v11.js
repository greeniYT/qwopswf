(()=>{var e,t,i,n,s={9662:(e,t,i)=>{var n=i(614),s=i(6330),r=TypeError;e.exports=function(e){if(n(e))return e;throw r(s(e)+" is not a function")}},6077:(e,t,i)=>{var n=i(614),s=String,r=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw r("Can't set "+s(e)+" as a prototype")}},9670:(e,t,i)=>{var n=i(111),s=String,r=TypeError;e.exports=function(e){if(n(e))return e;throw r(s(e)+" is not an object")}},3013:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:(e,t,i)=>{"use strict";var n,s,r,o=i(3013),a=i(9781),d=i(7854),c=i(614),u=i(111),l=i(2597),h=i(648),p=i(6330),g=i(8880),m=i(8052),f=i(3070).f,b=i(7976),v=i(9518),y=i(7674),w=i(5112),A=i(9711),S=i(9909),B=S.enforce,P=S.get,I=d.Int8Array,C=I&&I.prototype,k=d.Uint8ClampedArray,U=k&&k.prototype,T=I&&v(I),x=C&&v(C),z=Object.prototype,E=d.TypeError,_=w("toStringTag"),R=A("TYPED_ARRAY_TAG"),F="TypedArrayConstructor",q=o&&!!y&&"Opera"!==h(d.opera),O=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},D=function(e){var t=v(e);if(u(t)){var i=P(t);return i&&l(i,F)?i.TypedArrayConstructor:D(t)}},M=function(e){if(!u(e))return!1;var t=h(e);return l(j,t)||l(L,t)};for(n in j)(r=(s=d[n])&&s.prototype)?B(r).TypedArrayConstructor=s:q=!1;for(n in L)(r=(s=d[n])&&s.prototype)&&(B(r).TypedArrayConstructor=s);if((!q||!c(T)||T===Function.prototype)&&(T=function(){throw E("Incorrect invocation")},q))for(n in j)d[n]&&y(d[n],T);if((!q||!x||x===z)&&(x=T.prototype,q))for(n in j)d[n]&&y(d[n].prototype,x);if(q&&v(U)!==x&&y(U,x),a&&!l(x,_))for(n in O=!0,f(x,_,{get:function(){return u(this)?this[R]:void 0}}),j)d[n]&&g(d[n],R,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:q,TYPED_ARRAY_TAG:O&&R,aTypedArray:function(e){if(M(e))return e;throw E("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!y||b(T,e)))return e;throw E(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i,n){if(a){if(i)for(var s in j){var r=d[s];if(r&&l(r.prototype,e))try{delete r.prototype[e]}catch(i){try{r.prototype[e]=t}catch(e){}}}x[e]&&!i||m(x,e,i?t:q&&C[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,i){var n,s;if(a){if(y){if(i)for(n in j)if((s=d[n])&&l(s,e))try{delete s[e]}catch(e){}if(T[e]&&!i)return;try{return m(T,e,i?t:q&&T[e]||t)}catch(e){}}for(n in j)!(s=d[n])||s[e]&&!i||m(s,e,t)}},getTypedArrayConstructor:D,isView:function(e){if(!u(e))return!1;var t=h(e);return"DataView"===t||l(j,t)||l(L,t)},isTypedArray:M,TypedArray:T,TypedArrayPrototype:x}},1285:(e,t,i)=>{"use strict";var n=i(7908),s=i(1400),r=i(6244);e.exports=function(e){for(var t=n(this),i=r(t),o=arguments.length,a=s(o>1?arguments[1]:void 0,i),d=o>2?arguments[2]:void 0,c=void 0===d?i:s(d,i);c>a;)t[a++]=e;return t}},1318:(e,t,i)=>{var n=i(5656),s=i(1400),r=i(6244),o=function(e){return function(t,i,o){var a,d=n(t),c=r(d),u=s(o,c);if(e&&i!=i){for(;c>u;)if((a=d[u++])!=a)return!0}else for(;c>u;u++)if((e||u in d)&&d[u]===i)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},1589:(e,t,i)=>{var n=i(1400),s=i(6244),r=i(6135),o=Array,a=Math.max;e.exports=function(e,t,i){for(var d=s(e),c=n(t,d),u=n(void 0===i?d:i,d),l=o(a(u-c,0)),h=0;c<u;c++,h++)r(l,h,e[c]);return l.length=h,l}},206:(e,t,i)=>{var n=i(1702);e.exports=n([].slice)},4362:(e,t,i)=>{var n=i(1589),s=Math.floor,r=function(e,t){var i=e.length,d=s(i/2);return i<8?o(e,t):a(e,r(n(e,0,d),t),r(n(e,d),t),t)},o=function(e,t){for(var i,n,s=e.length,r=1;r<s;){for(n=r,i=e[r];n&&t(e[n-1],i)>0;)e[n]=e[--n];n!==r++&&(e[n]=i)}return e},a=function(e,t,i,n){for(var s=t.length,r=i.length,o=0,a=0;o<s||a<r;)e[o+a]=o<s&&a<r?n(t[o],i[a])<=0?t[o++]:i[a++]:o<s?t[o++]:i[a++];return e};e.exports=r},4326:(e,t,i)=>{var n=i(1702),s=n({}.toString),r=n("".slice);e.exports=function(e){return r(s(e),8,-1)}},648:(e,t,i)=>{var n=i(1694),s=i(614),r=i(4326),o=i(5112)("toStringTag"),a=Object,d="Arguments"==r(function(){return arguments}());e.exports=n?r:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=a(e),o))?i:d?r(t):"Object"==(n=r(t))&&s(t.callee)?"Arguments":n}},2128:(e,t,i)=>{var n=i(2597),s=i(3887),r=i(1236),o=i(3070);e.exports=function(e,t,i){for(var a=s(t),d=o.f,c=r.f,u=0;u<a.length;u++){var l=a[u];n(e,l)||i&&n(i,l)||d(e,l,c(t,l))}}},9920:(e,t,i)=>{var n=i(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8880:(e,t,i)=>{var n=i(9781),s=i(3070),r=i(9114);e.exports=n?function(e,t,i){return s.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:(e,t,i)=>{"use strict";var n=i(4948),s=i(3070),r=i(9114);e.exports=function(e,t,i){var o=n(t);o in e?s.f(e,o,r(0,i)):e[o]=i}},7045:(e,t,i)=>{var n=i(6339),s=i(3070);e.exports=function(e,t,i){return i.get&&n(i.get,t,{getter:!0}),i.set&&n(i.set,t,{setter:!0}),s.f(e,t,i)}},8052:(e,t,i)=>{var n=i(614),s=i(3070),r=i(6339),o=i(3072);e.exports=function(e,t,i,a){a||(a={});var d=a.enumerable,c=void 0!==a.name?a.name:t;if(n(i)&&r(i,c,a),a.global)d?e[t]=i:o(t,i);else{try{a.unsafe?e[t]&&(d=!0):delete e[t]}catch(e){}d?e[t]=i:s.f(e,t,{value:i,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3072:(e,t,i)=>{var n=i(7854),s=Object.defineProperty;e.exports=function(e,t){try{s(n,e,{value:t,configurable:!0,writable:!0})}catch(i){n[e]=t}return t}},9781:(e,t,i)=>{var n=i(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:e=>{var t="object"==typeof document&&document.all,i=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:i}},317:(e,t,i)=>{var n=i(7854),s=i(111),r=n.document,o=s(r)&&s(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},8886:(e,t,i)=>{var n=i(8113).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},256:(e,t,i)=>{var n=i(8113);e.exports=/MSIE|Trident/.test(n)},6833:(e,t,i)=>{var n=i(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},5268:(e,t,i)=>{var n=i(4326),s=i(7854);e.exports="process"==n(s.process)},8113:(e,t,i)=>{var n=i(5005);e.exports=n("navigator","userAgent")||""},7392:(e,t,i)=>{var n,s,r=i(7854),o=i(8113),a=r.process,d=r.Deno,c=a&&a.versions||d&&d.version,u=c&&c.v8;u&&(s=(n=u.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!s&&o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(s=+n[1]),e.exports=s},8008:(e,t,i)=>{var n=i(8113).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,i)=>{var n=i(7854),s=i(1236).f,r=i(8880),o=i(8052),a=i(3072),d=i(2128),c=i(4705);e.exports=function(e,t){var i,u,l,h,p,g=e.target,m=e.global,f=e.stat;if(i=m?n:f?n[g]||a(g,{}):(n[g]||{}).prototype)for(u in t){if(h=t[u],l=e.dontCallGetSet?(p=s(i,u))&&p.value:i[u],!c(m?u:g+(f?".":"#")+u,e.forced)&&void 0!==l){if(typeof h==typeof l)continue;d(h,l)}(e.sham||l&&l.sham)&&r(h,"sham",!0),o(i,u,h,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},2104:(e,t,i)=>{var n=i(4374),s=Function.prototype,r=s.apply,o=s.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(r):function(){return o.apply(r,arguments)})},9974:(e,t,i)=>{var n=i(1702),s=i(9662),r=i(4374),o=n(n.bind);e.exports=function(e,t){return s(e),void 0===t?e:r?o(e,t):function(){return e.apply(t,arguments)}}},4374:(e,t,i)=>{var n=i(7293);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:(e,t,i)=>{var n=i(4374),s=Function.prototype.call;e.exports=n?s.bind(s):function(){return s.apply(s,arguments)}},6530:(e,t,i)=>{var n=i(9781),s=i(2597),r=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,a=s(r,"name"),d=a&&"something"===function(){}.name,c=a&&(!n||n&&o(r,"name").configurable);e.exports={EXISTS:a,PROPER:d,CONFIGURABLE:c}},1702:(e,t,i)=>{var n=i(4374),s=Function.prototype,r=s.bind,o=s.call,a=n&&r.bind(o,o);e.exports=n?function(e){return e&&a(e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},5005:(e,t,i)=>{var n=i(7854),s=i(614),r=function(e){return s(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?r(n[e]):n[e]&&n[e][t]}},8173:(e,t,i)=>{var n=i(9662),s=i(8554);e.exports=function(e,t){var i=e[t];return s(i)?void 0:n(i)}},7854:(e,t,i)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||function(){return this}()||Function("return this")()},2597:(e,t,i)=>{var n=i(1702),s=i(7908),r=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return r(s(e),t)}},3501:e=>{e.exports={}},490:(e,t,i)=>{var n=i(5005);e.exports=n("document","documentElement")},4664:(e,t,i)=>{var n=i(9781),s=i(7293),r=i(317);e.exports=!n&&!s((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,i)=>{var n=i(1702),s=i(7293),r=i(4326),o=Object,a=n("".split);e.exports=s((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?a(e,""):o(e)}:o},2788:(e,t,i)=>{var n=i(1702),s=i(614),r=i(5465),o=n(Function.toString);s(r.inspectSource)||(r.inspectSource=function(e){return o(e)}),e.exports=r.inspectSource},9909:(e,t,i)=>{var n,s,r,o=i(4811),a=i(7854),d=i(1702),c=i(111),u=i(8880),l=i(2597),h=i(5465),p=i(6200),g=i(3501),m="Object already initialized",f=a.TypeError,b=a.WeakMap;if(o||h.state){var v=h.state||(h.state=new b),y=d(v.get),w=d(v.has),A=d(v.set);n=function(e,t){if(w(v,e))throw f(m);return t.facade=e,A(v,e,t),t},s=function(e){return y(v,e)||{}},r=function(e){return w(v,e)}}else{var S=p("state");g[S]=!0,n=function(e,t){if(l(e,S))throw f(m);return t.facade=e,u(e,S,t),t},s=function(e){return l(e,S)?e[S]:{}},r=function(e){return l(e,S)}}e.exports={set:n,get:s,has:r,enforce:function(e){return r(e)?s(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!c(t)||(i=s(t)).type!==e)throw f("Incompatible receiver, "+e+" required");return i}}}},614:(e,t,i)=>{var n=i(4154),s=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===s}:function(e){return"function"==typeof e}},4705:(e,t,i)=>{var n=i(7293),s=i(614),r=/#|\.prototype\./,o=function(e,t){var i=d[a(e)];return i==u||i!=c&&(s(t)?n(t):!!t)},a=o.normalize=function(e){return String(e).replace(r,".").toLowerCase()},d=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},8554:e=>{e.exports=function(e){return null==e}},111:(e,t,i)=>{var n=i(614),s=i(4154),r=s.all;e.exports=s.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===r}:function(e){return"object"==typeof e?null!==e:n(e)}},1913:e=>{e.exports=!1},2190:(e,t,i)=>{var n=i(5005),s=i(614),r=i(7976),o=i(3307),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return s(t)&&r(t.prototype,a(e))}},6244:(e,t,i)=>{var n=i(7466);e.exports=function(e){return n(e.length)}},6339:(e,t,i)=>{var n=i(7293),s=i(614),r=i(2597),o=i(9781),a=i(6530).CONFIGURABLE,d=i(2788),c=i(9909),u=c.enforce,l=c.get,h=Object.defineProperty,p=o&&!n((function(){return 8!==h((function(){}),"length",{value:8}).length})),g=String(String).split("String"),m=e.exports=function(e,t,i){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!r(e,"name")||a&&e.name!==t)&&(o?h(e,"name",{value:t,configurable:!0}):e.name=t),p&&i&&r(i,"arity")&&e.length!==i.arity&&h(e,"length",{value:i.arity});try{i&&r(i,"constructor")&&i.constructor?o&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=u(e);return r(n,"source")||(n.source=g.join("string"==typeof t?t:"")),e};Function.prototype.toString=m((function(){return s(this)&&l(this).source||d(this)}),"toString")},4758:e=>{var t=Math.ceil,i=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?i:t)(n)}},3070:(e,t,i)=>{var n=i(9781),s=i(4664),r=i(3353),o=i(9670),a=i(4948),d=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,l="enumerable",h="configurable",p="writable";t.f=n?r?function(e,t,i){if(o(e),t=a(t),o(i),"function"==typeof e&&"prototype"===t&&"value"in i&&p in i&&!i.writable){var n=u(e,t);n&&n.writable&&(e[t]=i.value,i={configurable:h in i?i.configurable:n.configurable,enumerable:l in i?i.enumerable:n.enumerable,writable:!1})}return c(e,t,i)}:c:function(e,t,i){if(o(e),t=a(t),o(i),s)try{return c(e,t,i)}catch(e){}if("get"in i||"set"in i)throw d("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},1236:(e,t,i)=>{var n=i(9781),s=i(6916),r=i(5296),o=i(9114),a=i(5656),d=i(4948),c=i(2597),u=i(4664),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=a(e),t=d(t),u)try{return l(e,t)}catch(e){}if(c(e,t))return o(!s(r.f,e,t),e[t])}},8006:(e,t,i)=>{var n=i(6324),s=i(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,i)=>{var n=i(2597),s=i(614),r=i(7908),o=i(6200),a=i(9920),d=o("IE_PROTO"),c=Object,u=c.prototype;e.exports=a?c.getPrototypeOf:function(e){var t=r(e);if(n(t,d))return t[d];var i=t.constructor;return s(i)&&t instanceof i?i.prototype:t instanceof c?u:null}},7976:(e,t,i)=>{var n=i(1702);e.exports=n({}.isPrototypeOf)},6324:(e,t,i)=>{var n=i(1702),s=i(2597),r=i(5656),o=i(1318).indexOf,a=i(3501),d=n([].push);e.exports=function(e,t){var i,n=r(e),c=0,u=[];for(i in n)!s(a,i)&&s(n,i)&&d(u,i);for(;t.length>c;)s(n,i=t[c++])&&(~o(u,i)||d(u,i));return u}},5296:(e,t)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,s=n&&!i.call({1:2},1);t.f=s?function(e){var t=n(this,e);return!!t&&t.enumerable}:i},7674:(e,t,i)=>{var n=i(1702),s=i(9670),r=i(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return s(i),r(n),t?e(i,n):i.__proto__=n,i}}():void 0)},2140:(e,t,i)=>{var n=i(6916),s=i(614),r=i(111),o=TypeError;e.exports=function(e,t){var i,a;if("string"===t&&s(i=e.toString)&&!r(a=n(i,e)))return a;if(s(i=e.valueOf)&&!r(a=n(i,e)))return a;if("string"!==t&&s(i=e.toString)&&!r(a=n(i,e)))return a;throw o("Can't convert object to primitive value")}},3887:(e,t,i)=>{var n=i(5005),s=i(1702),r=i(8006),o=i(5181),a=i(9670),d=s([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=r.f(a(e)),i=o.f;return i?d(t,i(e)):t}},7066:(e,t,i)=>{"use strict";var n=i(9670);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4488:(e,t,i)=>{var n=i(8554),s=TypeError;e.exports=function(e){if(n(e))throw s("Can't call method on "+e);return e}},6200:(e,t,i)=>{var n=i(2309),s=i(9711),r=n("keys");e.exports=function(e){return r[e]||(r[e]=s(e))}},5465:(e,t,i)=>{var n=i(7854),s=i(3072),r="__core-js_shared__",o=n[r]||s(r,{});e.exports=o},2309:(e,t,i)=>{var n=i(1913),s=i(5465);(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.3",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.3/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:(e,t,i)=>{var n=i(7392),s=i(7293);e.exports=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},261:(e,t,i)=>{var n,s,r,o,a=i(7854),d=i(2104),c=i(9974),u=i(614),l=i(2597),h=i(7293),p=i(490),g=i(206),m=i(317),f=i(8053),b=i(6833),v=i(5268),y=a.setImmediate,w=a.clearImmediate,A=a.process,S=a.Dispatch,B=a.Function,P=a.MessageChannel,I=a.String,C=0,k={},U="onreadystatechange";try{n=a.location}catch(e){}var T=function(e){if(l(k,e)){var t=k[e];delete k[e],t()}},x=function(e){return function(){T(e)}},z=function(e){T(e.data)},E=function(e){a.postMessage(I(e),n.protocol+"//"+n.host)};y&&w||(y=function(e){f(arguments.length,1);var t=u(e)?e:B(e),i=g(arguments,1);return k[++C]=function(){d(t,void 0,i)},s(C),C},w=function(e){delete k[e]},v?s=function(e){A.nextTick(x(e))}:S&&S.now?s=function(e){S.now(x(e))}:P&&!b?(o=(r=new P).port2,r.port1.onmessage=z,s=c(o.postMessage,o)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!h(E)?(s=E,a.addEventListener("message",z,!1)):s=U in m("script")?function(e){p.appendChild(m("script")).onreadystatechange=function(){p.removeChild(this),T(e)}}:function(e){setTimeout(x(e),0)}),e.exports={set:y,clear:w}},1400:(e,t,i)=>{var n=i(9303),s=Math.max,r=Math.min;e.exports=function(e,t){var i=n(e);return i<0?s(i+t,0):r(i,t)}},4599:(e,t,i)=>{var n=i(7593),s=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw s("Can't convert number to bigint");return BigInt(t)}},5656:(e,t,i)=>{var n=i(8361),s=i(4488);e.exports=function(e){return n(s(e))}},9303:(e,t,i)=>{var n=i(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},7466:(e,t,i)=>{var n=i(9303),s=Math.min;e.exports=function(e){return e>0?s(n(e),9007199254740991):0}},7908:(e,t,i)=>{var n=i(4488),s=Object;e.exports=function(e){return s(n(e))}},4590:(e,t,i)=>{var n=i(3002),s=RangeError;e.exports=function(e,t){var i=n(e);if(i%t)throw s("Wrong offset");return i}},3002:(e,t,i)=>{var n=i(9303),s=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw s("The argument can't be less than 0");return t}},7593:(e,t,i)=>{var n=i(6916),s=i(111),r=i(2190),o=i(8173),a=i(2140),d=i(5112),c=TypeError,u=d("toPrimitive");e.exports=function(e,t){if(!s(e)||r(e))return e;var i,d=o(e,u);if(d){if(void 0===t&&(t="default"),i=n(d,e,t),!s(i)||r(i))return i;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:(e,t,i)=>{var n=i(7593),s=i(2190);e.exports=function(e){var t=n(e,"string");return s(t)?t:t+""}},1694:(e,t,i)=>{var n={};n[i(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},6330:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9711:(e,t,i)=>{var n=i(1702),s=0,r=Math.random(),o=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++s+r,36)}},3307:(e,t,i)=>{var n=i(6293);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,i)=>{var n=i(9781),s=i(7293);e.exports=n&&s((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:e=>{var t=TypeError;e.exports=function(e,i){if(e<i)throw t("Not enough arguments");return e}},4811:(e,t,i)=>{var n=i(7854),s=i(614),r=n.WeakMap;e.exports=s(r)&&/native code/.test(String(r))},5112:(e,t,i)=>{var n=i(7854),s=i(2309),r=i(2597),o=i(9711),a=i(6293),d=i(3307),c=s("wks"),u=n.Symbol,l=u&&u.for,h=d?u:u&&u.withoutSetter||o;e.exports=function(e){if(!r(c,e)||!a&&"string"!=typeof c[e]){var t="Symbol."+e;a&&r(u,e)?c[e]=u[e]:c[e]=d&&l?l(t):h(t)}return c[e]}},2087:(e,t,i)=>{var n=i(7854),s=i(9781),r=i(7045),o=i(7066),a=i(7293),d=n.RegExp,c=d.prototype;s&&a((function(){var e=!0;try{d(".","d")}catch(t){e=!1}var t={},i="",n=e?"dgimsy":"gimsy",s=function(e,n){Object.defineProperty(t,e,{get:function(){return i+=n,!0}})},r={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(r.hasIndices="d"),r)s(o,r[o]);return Object.getOwnPropertyDescriptor(c,"flags").get.call(t)!==n||i!==n}))&&r(c,"flags",{configurable:!0,get:o})},3105:(e,t,i)=>{"use strict";var n=i(260),s=i(1285),r=i(4599),o=i(648),a=i(6916),d=i(1702),c=i(7293),u=n.aTypedArray,l=n.exportTypedArrayMethod,h=d("".slice);l("fill",(function(e){var t=arguments.length;u(this);var i="Big"===h(o(this),0,3)?r(e):+e;return a(s,this,i,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),c((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},3462:(e,t,i)=>{"use strict";var n=i(7854),s=i(6916),r=i(260),o=i(6244),a=i(4590),d=i(7908),c=i(7293),u=n.RangeError,l=n.Int8Array,h=l&&l.prototype,p=h&&h.set,g=r.aTypedArray,m=r.exportTypedArrayMethod,f=!c((function(){var e=new Uint8ClampedArray(2);return s(p,e,{length:1,0:3},1),3!==e[1]})),b=f&&r.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new l(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));m("set",(function(e){g(this);var t=a(arguments.length>1?arguments[1]:void 0,1),i=d(e);if(f)return s(p,this,i,t);var n=this.length,r=o(i),c=0;if(r+t>n)throw u("Wrong length");for(;c<r;)this[t+c]=i[c++]}),!f||b)},3824:(e,t,i)=>{"use strict";var n=i(7854),s=i(1702),r=i(7293),o=i(9662),a=i(4362),d=i(260),c=i(8886),u=i(256),l=i(7392),h=i(8008),p=d.aTypedArray,g=d.exportTypedArrayMethod,m=n.Uint16Array,f=m&&s(m.prototype.sort),b=!(!f||r((function(){f(new m(2),null)}))&&r((function(){f(new m(2),{})}))),v=!!f&&!r((function(){if(l)return l<74;if(c)return c<67;if(u)return!0;if(h)return h<602;var e,t,i=new m(516),n=Array(516);for(e=0;e<516;e++)t=e%4,i[e]=515-e,n[e]=e-2*t+3;for(f(i,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(i[e]!==n[e])return!0}));g("sort",(function(e){return void 0!==e&&o(e),v?f(this,e):a(p(this),function(e){return function(t,i){return void 0!==e?+e(t,i)||0:i!=i?-1:t!=t?1:0===t&&0===i?1/t>0&&1/i<0?1:-1:t>i}}(e))}),!v||b)},1091:(e,t,i)=>{var n=i(2109),s=i(7854),r=i(261).clear;n({global:!0,bind:!0,enumerable:!0,forced:s.clearImmediate!==r},{clearImmediate:r})},4633:(e,t,i)=>{i(1091),i(2986)},2986:(e,t,i)=>{var n=i(2109),s=i(7854),r=i(261).set;n({global:!0,bind:!0,enumerable:!0,forced:s.setImmediate!==r},{setImmediate:r})},4155:e=>{var t,i,n=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(e){i=r}}();var a,d=[],c=!1,u=-1;function l(){c&&a&&(c=!1,a.length?d=a.concat(d):u=-1,d.length&&h())}function h(){if(!c){var e=o(l);c=!0;for(var t=d.length;t;){for(a=d,d=[];++u<t;)a&&a[u].run();u=-1,t=d.length}a=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new p(e,t)),1!==d.length||c||o(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return s[e](i,i.exports,o),i.exports}o.m=s,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if("object"==typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&"function"==typeof i.then)return i}var s=Object.create(null);o.r(s);var r={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>r[e]=()=>i[e]));return r.default=()=>i,o.d(s,r),s},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,i)=>(o.f[i](e,t),t)),[])),o.u=e=>e+".bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},n="crazygames-ads:",o.l=(e,t,s,r)=>{if(i[e])i[e].push(t);else{var a,d;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==n+s){a=l;break}}a||(d=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",n+s),a.src=e),i[e]=[t];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var s=i[e];if(delete i[e],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),d&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={179:0};o.f.j=(t,i)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise(((i,s)=>n=e[t]=[i,s]));i.push(n[2]=s);var r=o.p+o.u(t),a=new Error;o.l(r,(i=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,n[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var n,s,[r,a,d]=i,c=0;if(r.some((t=>0!==e[t]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(d)d(o)}for(t&&t(i);c<r.length;c++)s=r[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=globalThis.webpackChunkcrazygames_ads=globalThis.webpackChunkcrazygames_ads||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";o(2087),o(3105),o(3462),o(3824),o(4633);const e=new class{constructor(){var e,t,i;i=void 0,(t="debugEnabled")in(e=this)?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,this.debugEnabled=this.isDebugEnabled()}debug(e){if(this.debugEnabled){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];console.log(e,...i)}}log(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];console.log(e,...i)}warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];console.warn(e,...i)}error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];console.error(e,...i)}isDebugEnabled(){return!(window.location.search.indexOf("raf_debug=true")<0)}},t=e;function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const n=class{constructor(){i(this,"initialized",!1),i(this,"disabledBidder",null),i(this,"gamKeys",void 0),i(this,"actualCandidates",[]),this.gamKeys={appnexus:"appnexus_disabled",ix:"ix_disabled",pubmatic:"pubmatic_disabled",rubicon:"rubicon_disabled",sharethrough:"st_disabled",rise:"rise_disabled",amazon:"amazon_disabled",iionads:"iion_disabled",venatus:"venatus_disabled",stroeerCore:"stroeer_disabled",mediafuse:"mediafuse_disabled",webads:"webads_disabled",goldbach:"goldbach_disabled",smilewanted:"smilewanted_disabled",beintoo:"beintoo_disabled",seedtag:"seedtag_disabled",adbility:"adbility_disabled",richaudience:"raudience_disabled",mediasquare:"mediasquare_disabled",ozone:"ozone_disabled"}}init(){if(this.initialized)return;this.initialized=!0;const e=this.getCandidates(),i=.005*e.length;if(Math.random()<i){const t=e[Math.floor(Math.random()*e.length)];this.disabledBidder=t}t.debug(`Incremental bidder test initialized with disabled bidder: ${this.disabledBidder}`)}isBidderDisabled(e){return this.disabledBidder===e}addToActualCandidates(e){this.getCandidates().includes(e)&&this.actualCandidates.push(e)}getGamKeys(){return this.initialized?this.actualCandidates.reduce(((e,t)=>({...e,[this.gamKeys[t]]:`${this.isBidderDisabled(t)}`})),{}):{}}getCandidates(){return Object.keys(this.gamKeys)}};function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const r=["RU","VE","BY"];class a{constructor(){s(this,"sessionBidderConfig",{}),s(this,"incrementalBidderTest",void 0),this.incrementalBidderTest=new n,this.incrementalBidderTest.init()}getBidderConfig(e){return this.sessionBidderConfig[e]}setBidderConfig(e,t){this.sessionBidderConfig[e]={...t}}addToIncrementalBidderTest(e){this.incrementalBidderTest.addToActualCandidates(e)}disabledInIncrementalBidderTest(e){const i=this.incrementalBidderTest.isBidderDisabled(e);return i&&t.debug(`Incremental bidder test disabling ${e}.`),i}getIncrementalBidderGamKeys(){return this.incrementalBidderTest.getGamKeys()}getKVs(){return Object.values(this.sessionBidderConfig).filter((e=>void 0!==e.gamKey)).reduce(((e,t)=>{let{gamKey:i,enabled:n}=t;return{...e,[i]:`${n}`}}),{})}}const d=new class{constructor(){s(this,"config",null),s(this,"sessionBidderConfig",{})}setBidderConfig(e){this.config=e}getBidderConfig(e){if(!this.config)throw new Error("Bidder config not loaded");const i=this.config[e];return i||(t.error(`Bidder config for ${e} not found. Disabling for this session.`),{rules:[{enabled:0}]})}isBidderEnabledForSession(e,i,n){const s=this.getSessionConfig(n),r=s.getBidderConfig(e);if(r)return r.enabled;if(window.location.search.includes(`${e}_enabled`))return t.debug(`Force enabling bidder ${e} for this session through query param.`),s.setBidderConfig(e,{probability:1,enabled:!0}),!0;this.logWarningIfMissingSessionInfo(i,e);const o=this.getBidderConfig(e).rules,{enabled:a,gamKey:d}=this.getApplicableRule(o,i,n,e);let c;return 1===a?(s.addToIncrementalBidderTest(e),c=!s.disabledInIncrementalBidderTest(e)):c=Math.random()<a,t.debug(`Bidder ${e} is ${c?"enabled":"disabled"} with probability ${a} for ${n}s.`),s.setBidderConfig(e,{probability:a,enabled:c,gamKey:d}),c}getApplicableRule(e,i,n,s){if(null!=i&&i.country){const{country:e}=i;if(r.includes(e))return{enabled:0}}const o=(null==i?void 0:i.country)??"US",a=(null==i?void 0:i.device)??"desktop",d=null==i?void 0:i.locale,c=null==i?void 0:i.browser;for(const t of e){if(!t.conditions)return t;if(!i)continue;const{country:e,locale:s,browser:r,device:u,adFormat:l}=t.conditions;if((!e||e.includes(o))&&((!s||!d||s.includes(d))&&(!r||!c||r.includes(c))&&(!u||u.includes(a))&&(!l||l.includes(n))))return t}return t.error(`No rule applies for bidder ${s} with config ${JSON.stringify(i)} and ad format ${n}. Disabling for safety.`),{enabled:0}}getIncrementalBidderGamKeys(e){return this.getSessionConfig(e).getIncrementalBidderGamKeys()}getSessionKVs(e){return this.getSessionConfig(e).getKVs()}getSessionConfig(e){return this.sessionBidderConfig[e]||(this.sessionBidderConfig[e]=new a),this.sessionBidderConfig[e]}logWarningIfMissingSessionInfo(e,i){if("google"===i)return;if(!e)return void t.warn(`Session info is missing. Using the default rule for ${i}.`);const n=[];e.country||n.push("country"),e.device||n.push("device"),e.locale||n.push("locale"),e.browser||n.push("browser"),n.length>0&&t.warn(`Missing session info: ${n.join(", ")}.`)}resetSessionBidderConfig(){t.warn("Resetting session bidder config. This should only be used for testing purposes.");for(const e of Object.getOwnPropertyNames(this.sessionBidderConfig))delete this.sessionBidderConfig[e]}},c=d,u=JSON.parse('{"api":"https://api.crazygames.com"}');const l={rubicon:{cost:0,discrepancy:.08,rules:[{enabled:0,conditions:{country:["TH","RO","CR","SK","VE","KW","KE","QA","UA","BO","EE","PA","SN","EG","PR","HR","MA","LT","OM","GE","NG","HN","BG","JM","JO","LV","BD","TT","BH","BW","SV","NI","CI","MK","GU","LU","BS","PY","AL","CY","IR","LB","BA","LK","AM","KH","GH","CN","PS","DZ","KZ","GY","TZ","UZ","MD","KY","RW","ZM","BM","MM","NP","AS","NA","MU","ZW","CG","IQ","MO","UG","MP","ET","BY","BB","LC","MV","SR","TM","KG","AO","IM","BN","BT","AX","BZ","SY","DM","GP","GW","GM","AI","AW","MZ","SD","CW","ME","MG","BQ","RE","VC","VI","MC","PG","LA","AG","MN","MQ","KN","GG","GD","NE","CD","SC","SX","GF","NC","AD","MW","LY","FJ","VG","NU","CU","SM","SL","PF","HT","JE","AF","FO","GA","LI","SZ","SS","GL","GN","GI","CM","MR","LS","TG","YT","SO","DJ","TC","CV","LR","VA","BF","TJ","BI","TL","FM","BJ","ML","MS","YE","CF","SB","MF","CK","TD","BL","PM","KM","TO","VU","WS","FK","WF","ST","GQ","NF","PW","KI","MH","CO","AZ","AR","DO","PE","GT","TR","EC"]}},{enabled:1}]},appnexus:{discrepancy:.03,rules:[{enabled:0,conditions:{country:["UA","BY","VE","LB","BA","MK","IQ","ZW","ME","TM","PF","TJ","LY","SO","GP","AX","YE","AD","CD","MC","GA","DZ","IN","ID","PK"]}},{enabled:1}]},ix:{discrepancy:.07,rules:[{enabled:0,conditions:{country:["CN","AE","CH","EG"]}},{enabled:0,conditions:{adFormat:["video"],device:["mobile","tablet"]}},{enabled:1}]},pubmatic:{cost:0,discrepancy:.045,rules:[{enabled:0,conditions:{country:["AF","AX","AL","DZ","AD","AM","AZ","BD","BY","BO","BA","BG","CN","CR","CD","DO","EC","EG","SV","PF","GA","GR","GP","GT","HN","IQ","KZ","LV","LB","LY","MK","MD","MC","ME","MA","NP","PK","PA","PY","PE","PT","RS","SO","LK","TJ","TT","TR","TM","UA","UY","VE","VN","YE","ZW","IN","HK"]}},{enabled:1}]},amazon:{discrepancy:.02,rules:[{enabled:1}]},sharethrough:{discrepancy:.055,rules:[{enabled:0,conditions:{country:["CO"]}},{enabled:1}]},venatus:{cost:.3,discrepancy:.015,rules:[{enabled:1,conditions:{country:["US","GB","CA","FR","IT","ES","DE","TW","PE","BE","GR","MX","IE"]}},{enabled:0}]},rise:{discrepancy:.1,rules:[{enabled:1,conditions:{country:["US","CA","GB","DE","AU","NL","BE","ES","IT","FR","SE","FI","NO","DK","CH","IE","AT"]}},{enabled:0}]},stroeerCore:{discrepancy:.03,rules:[{enabled:1,conditions:{country:["DE","AT","CH"]}},{enabled:0}]},mediafuse:{cost:.2,discrepancy:.08,rules:[{enabled:1,conditions:{country:["US","CA","GB","AU"]}},{enabled:0}]},iionads:{discrepancy:.095,rules:[{enabled:1,conditions:{country:["NZ","AU","IN","ID","PH","JP","MY","TH","SG","NL","BH","QA","OM","KW","SA","AE"]}},{enabled:0}]},webads:{discrepancy:.04,rules:[{enabled:1,conditions:{country:["NL"]}},{enabled:.1,conditions:{country:["IT","ES"]}},{enabled:0}]},goldbach:{cost:.3,discrepancy:.41,rules:[{enabled:1,conditions:{country:["CH"]}},{enabled:0}]},smilewanted:{discrepancy:.2,rules:[{enabled:1,conditions:{country:["FR","CA","US","GB"]}},{enabled:0}]},beintoo:{rules:[{enabled:.1,conditions:{country:["DE","ES"]}},{enabled:0}]},seedtag:{rules:[{enabled:.1}]},adbility:{rules:[{enabled:.1,conditions:{country:["DE"],adFormat:["video"]}},{enabled:0}]},richaudience:{discrepancy:.05,rules:[{enabled:.1}]},mediasquare:{discrepancy:.05,rules:[{enabled:.1,conditions:{country:["FR"]}},{enabled:0}]},google:{rules:[{enabled:1}]},adsense:{rules:[{enabled:0}]},ozone:{rules:[{enabled:.1}]}};function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class p{constructor(){h(this,"analyticsEventHandler",void 0),h(this,"eventQueue",[])}static getInstance(){return p.instance||(p.instance=new p),p.instance}init(e){const i=e.analyticsEventHandler;i?(this.analyticsEventHandler=i,this.eventQueue.length>0&&(this.eventQueue.forEach((e=>this.analyticsEventHandler(e))),this.eventQueue=[])):t.warn("[CrazyAnalyticsService] analyticsEventHandler not set")}sendDisableBidderEvent(e){this.sendEvent({type:"disableVideoBidder",bidder:e.bidder,unit:e.unit})}sendAdsConfigLoadFailedEvent(e){this.sendEvent({type:"adsConfigLoadFailed",reason:e.reason})}getEventQueue(){return this.eventQueue}async sendEvent(e){if(!this.analyticsEventHandler)return t.warn("[CrazyAnalyticsService] analyticsEventHandler not set"),this.eventQueue.length>=10?void t.warn("[CrazyAnalyticsService] event queue is full, dropping event",e):void this.eventQueue.push(e);t.debug("[CrazyAnalyticsService] forwarding event",e),this.analyticsEventHandler(e)}}h(p,"instance",void 0);const g=p,m=.916089835433622;let f;function b(){return f||m}function v(e){return e instanceof Error?e.message??e.toString():`Unknown error ${JSON.stringify(e)}`}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function w(){return`${u.api}/v3/en_US/config`}const A=new class{constructor(){y(this,"loaded",!1),y(this,"success",null),y(this,"resolvers",[])}waitTillLoaded(){return this.loaded?this.success?Promise.resolve():Promise.reject(new Error("Config failed to load")):new Promise(((e,t)=>{this.resolvers.push({resolve:e,reject:t})}))}async fetchConfig(){const e=w();try{const i=await fetch(e);if(!i.ok)throw t.error("[configLoader] fetchConfig - response not ok",i),new Error(`Network response was not ok: ${JSON.stringify(i)}`);const n=await i.json();this.setConfig(n)}catch(e){t.error("[configLoader] fetchConfig - error fetching config. Using fallback config",e),g.getInstance().sendAdsConfigLoadFailedEvent({reason:v(e)}),this.setConfig({config:l,dollarRate:m})}}setConfig(e){var i;i=e.dollarRate,f=i,c.setBidderConfig(e.config),this.loaded=!0,this.success=!0,this.resolvers.forEach((e=>{let{resolve:t}=e;return t()})),this.resolvers=[],t.debug(`[configLoader] Set bidder config and dollar rate (${e.dollarRate}). Resolving ${this.resolvers.length} waiting promises`)}},S={advertising:{priceFloor:()=>.02,bidders:Object.values({rubicon:{bidder:"rubicon",accountId:"16980",siteId:"152672"},appnexus:{bidder:"appnexus"},ix:{bidder:"ix"},pubmatic:{bidder:"pubmatic",publisherId:"156561"},amazon:{bidder:"amazon",pubID:"9e9bffbc-66c5-4b5b-89aa-4d839e05ce3a",adServer:"googletag"},adsense:{bidder:"adsense",client:"ca-pub-8415986145297288"},sharethrough:{bidder:"sharethrough"},venatus:{bidder:"venatus",AV_PUBLISHERID:"5f2063121d82c82557194737"},rise:{bidder:"rise",org:"62a8b3133e1cca000167166d"},mediafuse:{bidder:"mediafuse",placementId:32058692},iionads:{bidder:"iionads"},webads:{bidder:"webads"},smilewanted:{bidder:"smilewanted",zoneId:"crazygames.com_hb_display"},seedtag:{bidder:"seedtag",publisherId:"1497-2859-01"},adbility:{bidder:"adbility",tagId:"3wzinkts"},richaudience:{bidder:"richaudience",supplyType:"site"},beintoo:{bidder:"beintoo"},goldbach:{bidder:"goldbach"},google:{bidder:"google"},stroeerCore:{bidder:"stroeerCore"},mediasquare:{bidder:"mediasquare",owner:"crazygames"},ozone:{bidder:"ozone",siteId:"1500000645",publisherId:"OZONECG00001"}}),server:{endpoint:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",syncEndpoint:"https://prebid.adnxs.com/pbs/v1/cookie_sync",accountId:"a37f9415-13c7-4a3a-abae-9c18699ec8ff"}},houseAds:{advertiserIds:[134924547]}},B=S.houseAds;function P(e){return null!=e}function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}async function C(e){return new Promise(((t,i)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=()=>i(new Error(`Failed to load ${e}`)),n.onload=()=>t(),document.head.appendChild(n)}))}class k{constructor(e){I(this,"scriptName",void 0),I(this,"loaderPromise",null),this.scriptName=e}async loadIfNeeded(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||await this.shouldLoad()?this.load():Promise.resolve()}load(){if(P(this.loaderPromise))return this.loaderPromise;const e=this.getScriptLocation();return this.loaderPromise=C(e).catch((e=>{throw t.error(`[LoadScript] ${this.scriptName} failed to load (${v(e)})`,e),e})),this.loaderPromise}}const U=new class extends k{constructor(){super("Adsense")}getScriptLocation(){return"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"}async shouldLoad(){return!0}};const T=new class extends k{constructor(){super("apstag")}getScriptLocation(){return"//c.amazon-adsystem.com/aax2/apstag.js"}async shouldLoad(){return!0}};const x=function(e){return e instanceof Function};function z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class E{static getInstance(){return void 0===this.instance&&(this.instance=new E),this.instance}constructor(){z(this,"prebidFullyLoaded",!1);const e=window;e.pbjs=e.pbjs||{que:[]},e.pbjs.que=e.pbjs.que||[],e.pbjs.que.push((()=>{this.prebidFullyLoaded=!0}))}getPbjsOrThrow(){if(!this.prebidFullyLoaded)throw new Error("Prebid is still loading");return window.pbjs}getPbjs(){if(this.prebidFullyLoaded)return this.getPbjsOrThrow()}getPbjsQueue(){return window.pbjs}}function _(){return E.getInstance().getPbjsQueue()}function R(){return E.getInstance().getPbjs()}function F(){return E.getInstance().getPbjsOrThrow()}z(E,"instance",void 0);class q{static getInstance(){return void 0===this.instance&&(this.instance=new q),this.instance}constructor(){z(this,"googletagFullyLoaded",!1);const e=window;e.googletag=e.googletag||{cmd:[]},e.googletag.cmd=e.googletag.cmd||[],e.googletag.cmd.push((()=>{this.googletagFullyLoaded=!0}))}getGoogletagOrThrow(){if(!this.googletagFullyLoaded)throw new Error("googletag is still loading");return window.googletag}getGoogletag(){if(this.googletagFullyLoaded)return this.getGoogletagOrThrow()}getGoogletagCmd(){return window.googletag}}function O(){return q.getInstance().getGoogletagCmd()}function j(){return q.getInstance().getGoogletagOrThrow()}z(q,"instance",void 0);class L{static getInstance(){return void 0===this.instance&&(this.instance=new L),this.instance}constructor(){const e=window;function t(t,i){e.apstag._Q.push([t,i])}const i={init:function(){t("i",arguments)},fetchBids:function(){t("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},dpa:function(){t("di",arguments)},rpa:function(){t("ri",arguments)},upa:function(){t("ui",arguments)},_Q:[]};e.apstag=e.apstag||i}getApstag(){return window.apstag}}function D(){return L.getInstance().getApstag()}z(L,"instance",void 0);class M{constructor(){const e=window;e.adsbygoogle=e.adsbygoogle||[]}static getInstance(){return void 0===this.instance&&(this.instance=new M),this.instance}getAdsenseWindow(){return window.adsbygoogle}}z(M,"instance",void 0);const N=new class extends k{constructor(){super("GoogleTag")}async shouldLoad(){return!this.isGoogleTagDefined()}getScriptLocation(){return"https://securepubads.g.doubleclick.net/tag/js/gpt.js"}isGoogleTagDefined(){const e=q.getInstance().getGoogletag();return void 0!==e&&x(e.pubads)&&x(e.pubads().getSlots)}};function V(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class G{constructor(){V(this,"data",void 0),this.data={},this.clear()}setItem(e,t){this.data[e]=String(t)}getItem(e){return this.data.hasOwnProperty(e)?this.data[e]:void 0}removeItem(e){delete this.data[e]}clear(){this.data={}}}class ${constructor(){V(this,"storage",void 0),this.storage=this.getAvailableStorage()}static get Instance(){return this._instance?this._instance:this._instance=new this}getItem(e){return this.storage.getItem(e)}setItem(e,t){this.storage.setItem(e,t)}removeItem(e){this.storage.removeItem(e)}clear(){return this.storage.clear()}isFunctioningStorage(e){try{const t=`__AdsSafeLocalStorage__${Date.now()}`,i="test";return e.setItem(t,i),e.getItem(t)!==i?!1:(window.localStorage.removeItem(t),!0)}catch(e){return!1}}getAvailableStorage(){try{return this.hasWorkingLocalStorage()?(t.debug("[SafeLocalStorage] using localStorage"),window.localStorage):this.hasWorkingSessionStorage()?(t.debug("[SafeLocalStorage] fallback to sessionStorage"),window.sessionStorage):(t.warn("[SafeLocalStorage] fallback to InMemoryStorage"),new G)}catch(e){return t.warn("[SafeLocalStorage] fallback to InMemoryStorage"),new G}}hasWorkingLocalStorage(){try{if(!window.hasOwnProperty("localStorage"))return!1;const{localStorage:e}=window;return this.isFunctioningStorage(e)}catch(e){return!1}}hasWorkingSessionStorage(){try{if(!window.hasOwnProperty("sessionStorage"))return!1;const{sessionStorage:e}=window;return this.isFunctioningStorage(e)}catch(e){return!1}}}function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}V($,"_instance",void 0);const H=[],K="li-module-enabled",Y="amazon_pf_exp_4_24",Z="hadron_exp_24",Q="game_slug_id_exp25",J="liveramp_enabled",X="uid2_exp",ee=[K,Y,Z,Q,J,X];class te{static getInstance(){return te.instance||(te.instance=new te),te.instance}constructor(){W(this,"experiments",{}),H.push({defaultValue:"false",key:K,options:[{chance:.95,value:"true"}]}),H.push({defaultValue:"false",key:Y,options:[{chance:0,value:"true"}]}),H.push({defaultValue:"false",key:Z,options:[{chance:0,value:"true"}]}),H.push({defaultValue:"false",key:Q,options:[{chance:.5,value:"true"}]}),H.push({defaultValue:"false",key:J,options:[{chance:1,value:"true"}]}),H.push({defaultValue:"false",key:X,options:[{chance:1,value:"true"}]});for(const e of H){const{key:i}=e,n=this.fetchExperimentValue(e);this.experiments[i]={value:n.value},n.forced||$.Instance.setItem(i,n.value),t.debug(`[Experiments] ${i}: ${n.value}`)}}getExperimentValue(e){var t;return null===(t=this.experiments[e])||void 0===t?void 0:t.value}getExperimentValueAsBoolean(e){return void 0!==this.experiments[e]?"true"===this.experiments[e].value:void 0}getExperimentValueAsNumber(e){return void 0!==this.experiments[e]?Number(this.experiments[e].value):void 0}fetchExperimentValue(e){const{key:t}=e,i=this.getForcedExperimentValue(t);if(null!=i)return{value:i,forced:!0};const n=$.Instance.getItem(t);if(null!=n)return{value:n};let s=Math.random();for(const t of e.options){const{chance:e,value:i}=t;if(s<e)return{value:i};s-=e}return{value:e.defaultValue}}getForcedExperimentValue(e){const t=window.location.search,i=new URLSearchParams(t).get(e);if(i)return i}}W(te,"instance",void 0);const ie=te;o(4155);const ne="prebid-v9.js";function se(e){switch(e){case K:case Y:case Z:case Q:case J:case X:return ne}}const re=new class extends k{constructor(){super("Prebid")}getScriptLocation(){const e=this.baseDomain();let t=ne;for(const e of ee)if(ie.getInstance().getExperimentValueAsBoolean(e)){const i=se(e);if(i!==ne){t=i;break}}return`${e}/${t}`}async shouldLoad(){return!this.isPrebidLoaded()}isPrebidLoaded(){const e=window;return e.pbjs&&e.pbjs.libLoaded}baseDomain(){return"https://fafvertizing.crazygames.com"}},oe=["google","amazon","adsense","ix","rubicon","sharethrough","pubmatic","appnexus","rise","stroeerCore","venatus","mediafuse","iionads","webads","goldbach","smilewanted","beintoo","seedtag","adbility","richaudience","mediasquare","ozone"];function ae(e,t){for(const i of t)if(i.bidder===e)return i;return null}function de(e){return"amazon"!==e&&"google"!==e&&"adsense"!==e}function ce(){return[...oe]}function ue(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class le{constructor(e){let{apiName:t,apiVersion:i,apiArgs:n=["command","callback","version"],callbackArgs:s=["returnValue","success"]}=e;ue(this,"win",window),ue(this,"apiName",void 0),ue(this,"apiVersion",void 0),ue(this,"apiArgs",void 0),ue(this,"callbackArgs",void 0),ue(this,"callName",void 0),ue(this,"returnName",void 0),ue(this,"cmpCallbacks",{}),ue(this,"eventCallbacks",{}),this.apiName=t,this.apiVersion=i,this.apiArgs=n,this.callbackArgs=s,this.callName=`${t}Call`,this.returnName=`${t}Return`}installLocator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(window[this.apiName])return Promise.resolve();return t>=e?Promise.resolve():((()=>{const{cmpFrame:e}=this.findLocatorFrame();e&&this.setupCMPWhileInIframe(e)})(),window[this.apiName]?Promise.resolve():new Promise((i=>{window.setTimeout((async()=>{await this.installLocator(e,t+1),i()}),50)})))}findLocatorFrame(){let e,t=window;for(;!e;){try{if(t.frames[`${this.apiName}Locator`]){e=t;break}}catch(e){}if(t===window.top)break;t=t.parent}return{cmpFrame:e}}setupCMPWhileInIframe(e){var t=this;window[this.apiName]=function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];const r=Math.random()+"",o=t.apiArgs.reduce(((e,t,i)=>(e[t]=n[i],e)),{version:t.apiVersion,callId:r}),a=o.callback,d=Object.fromEntries(Object.entries(o).filter((e=>{let[t,i]=e;return"callback"!==t}))),c={[t.callName]:d};if(void 0!==a){const e=o.command;if("addEventListener"===e)t.cmpCallbacks[r]=(e,i)=>{a(e,i),t.cmpCallbacks[r]=a;const n=e.listenerId;t.eventCallbacks[n]=(t.eventCallbacks[n]||[]).concat(r)};else if("removeEventListener"===e){const e=o.parameter;if(e){(t.eventCallbacks[e]||[]).forEach((e=>{delete t.cmpCallbacks[e]})),delete t.eventCallbacks[r],t.cmpCallbacks[r]=a}}else t.cmpCallbacks[r]=a}e.postMessage(c,"*")},this.win.addEventListener("message",(e=>this.readPostMessageResponse(e)),!1)}readPostMessageResponse(e){var t;const i="string"==typeof e.data&&e.data.includes(this.returnName)?JSON.parse(e.data):e.data;if(null!=i&&null!==(t=i[this.returnName])&&void 0!==t&&t.callId){const e=i[this.returnName];try{if(this.cmpCallbacks.hasOwnProperty(e.callId)&&void 0!==this.cmpCallbacks[e.callId]){const t=this.cmpCallbacks[e.callId];delete this.cmpCallbacks[e.callId],t(...this.callbackArgs.map((t=>e[t])))}}catch{}}}}const he=function(){const e=new le({apiName:"__uspapi",apiVersion:1,apiArgs:["command","version","callback"]}),t=new le({apiName:"__tcfapi",apiVersion:2,apiArgs:["command","version","callback","parameter"]});return Promise.all([e.installLocator(5),t.installLocator(5)])};const pe=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"],ge=[...pe,"GB","AI","BM","IO","KY","FK","GI","MS","PN","SH","GS","TC","VG","BR","CH","GB","NO"];function me(e){return!e||ge.indexOf(e)>=0}function fe(e){return!P(e)||"US"===e}function be(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ve{constructor(){be(this,"callback",void 0),be(this,"tcfConsentCBInstalled",!1),be(this,"tcfInstalledListenerInstalled",!1),be(this,"installTCFLoadedListener",(()=>{this.tcfInstalledListenerInstalled||(window.addEventListener("message",this.tcfLoadedListener),this.tcfInstalledListenerInstalled=!0)})),be(this,"tcfLoadedListener",(e=>{e.data&&"tcf-loaded"===e.data&&(window.removeEventListener("message",this.tcfLoadedListener),this.installTCFConsentCB())}))}async init(e){return this.callback=e,this.installTCFConsentCB()}async installTCFConsentCB(){if(this.tcfConsentCBInstalled)return;const e=window;e.__tcfapi||await he(),e.__tcfapi?(e.__tcfapi("addEventListener",2,((e,t)=>{t&&e&&(void 0!==this.callback&&this.callback(e,t),"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||this.removeTCFConsentCB(e.listenerId))})),this.tcfConsentCBInstalled=!0):this.installTCFLoadedListener()}removeTCFConsentCB(e){const t=window;t.__tcfapi&&void 0!==e&&t.__tcfapi("removeEventListener",2,(()=>{}),e)}}const ye=class{constructor(e){be(this,"tcfData",null),be(this,"tcfSuccess",!1),be(this,"consentListeners",[]),be(this,"consentTCFCb",((e,t)=>{t&&e&&(this.tcfData=e,this.tcfSuccess=t,this.consentListeners.forEach((i=>{this.callConsentListener(i,e,t)})))}));(void 0!==(null==e?void 0:e.consentInformationRetriever)?null==e?void 0:e.consentInformationRetriever:new ve).init(this.consentTCFCb).then((()=>{void 0!==(null==e?void 0:e.onInitialized)&&e.onInitialized()}))}addTCFConsentListener(e){this.consentListeners.push(e),this.tcfData&&this.callConsentListener(e,this.tcfData,this.tcfSuccess)}hasTCFConsent(){return!!(this.tcfSuccess&&this.tcfData&&this.tcfData.gdprApplies)&&("tcloaded"===this.tcfData.eventStatus||"useractioncomplete"===this.tcfData.eventStatus)}getConsentInformation(e){return me(e)&&(null===this.tcfData||this.tcfData.gdprApplies)?{countryCode:e,applicable:!0,consentInformationAvailable:this.hasTCFConsent()}:null}removeTCConsentListener(e){this.consentListeners=this.consentListeners.filter((t=>t!==e))}callConsentListener(e,t,i){try{e(t,i)}catch(e){console.error(e)}}};const we=function(e,t){return new Promise(((i,n)=>{window.setTimeout((()=>{i(t)}),e)}))};function Ae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Se{retrieveConsentInformation(){return new Promise(((e,t)=>{const i=window.__uspapi;if(void 0===i)return e(null);i("getUSPData",1,((t,i)=>{e(i?t:null)}))}))}}const Be=class{constructor(e){Ae(this,"consentInformationRetriever",void 0),Ae(this,"uspConsent",void 0),Ae(this,"consentListeners",[]),Ae(this,"storeUspConsent",(e=>{this.uspConsent=e,this.consentListeners.forEach((t=>this.callConsentListener(t,e)))})),this.consentInformationRetriever=void 0!==e?e:new Se}getUspConsent(){return Promise.race([this.getAndStoreUspConsentFromCMP(),we(200,null)])}addUSPConsentListener(e){this.getAndStoreUspConsentFromCMP(),this.consentListeners.push(e),void 0!==this.uspConsent&&this.callConsentListener(e,this.uspConsent)}removeUSPConsentListener(e){this.consentListeners=this.consentListeners.filter((t=>t!==e))}hasUspConsent(){return!(void 0===this.uspConsent||null===this.uspConsent)}getConsentInformation(e){return fe(e)?{countryCode:e,applicable:!0,consentInformationAvailable:this.hasUspConsent()}:null}callConsentListener(e,t){try{e(t)}catch(e){console.error(e)}}getAndStoreUspConsentFromCMP(){return new Promise(((e,t)=>{void 0===this.uspConsent?this.consentInformationRetriever.retrieveConsentInformation().then((t=>{this.storeUspConsent(t),e(t)})).catch((t=>{this.storeUspConsent(null),e(null)})):e(this.uspConsent)}))}};function Pe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ie{static createTestingInstance(e,t){return new Ie({tcfConsentManagement:e,uspConsentManagement:t,skipLocatorFrames:!0})}static getInstance(){return this.Instance||(this.Instance=new Ie),this.Instance}constructor(e){Pe(this,"tcfConsentManagement",void 0),Pe(this,"uspConsentManagement",void 0),Pe(this,"consentListeners",[]),Pe(this,"consent",!1),Pe(this,"onTCFConsentChange",((e,t)=>{this.hasTCFConsent()!=this.consent&&(this.consent=this.hasTCFConsent(),this.consentListeners.forEach((e=>this.fireConsentEventToListener(e))))})),Pe(this,"onUspConsentChange",(e=>{this.hasUspConsent()!=this.consent&&(this.consent=this.hasUspConsent(),this.consentListeners.forEach((e=>this.fireConsentEventToListener(e))))})),this.tcfConsentManagement=(null==e?void 0:e.tcfConsentManagement)??new ye,this.uspConsentManagement=(null==e?void 0:e.uspConsentManagement)??new Be,this.init(null==e?void 0:e.skipLocatorFrames)}async init(e){void 0!==e&&e||await he(),this.addTCFConsentListener(this.onTCFConsentChange),this.addUSPConsentListener(this.onUspConsentChange)}addTCFConsentListener(e){this.tcfConsentManagement.addTCFConsentListener(e)}hasTCFConsent(){return this.tcfConsentManagement.hasTCFConsent()}removeTCConsentListener(e){this.tcfConsentManagement.removeTCConsentListener(e)}getUspConsent(){return this.uspConsentManagement.getUspConsent()}addUSPConsentListener(e){this.uspConsentManagement.addUSPConsentListener(e)}removeUSPConsentListener(e){this.uspConsentManagement.removeUSPConsentListener(e)}hasUspConsent(){return this.uspConsentManagement.hasUspConsent()}addConsentListener(e){this.consentListeners.push(e),this.fireConsentEventToListener(e)}removeConsentListener(e){this.consentListeners=this.consentListeners.filter((t=>t!==e))}fireConsentEventToListener(e){try{e()}catch(e){console.error(e)}}getConsentInformation(e){const t=this.tcfConsentManagement.getConsentInformation(e);if(null!==t)return t;const i=this.uspConsentManagement.getConsentInformation(e);return null!==i?i:{countryCode:e,applicable:!1,consentInformationAvailable:!1}}}Pe(Ie,"Instance",void 0);const Ce=Ie;function ke(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ue{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];ke(this,"_amountInCents",void 0),ke(this,"_amountInUnits",void 0),ke(this,"_currency",void 0),ke(this,"compareTo",(e=>this.asCents(this._currency)-e.asCents(this._currency))),ke(this,"isGt",(e=>this.compareTo(e)>0)),ke(this,"isGte",(e=>this.compareTo(e)>=0)),ke(this,"isLt",(e=>this.compareTo(e)<0)),ke(this,"isLte",(e=>this.compareTo(e)<=0)),ke(this,"isEq",(e=>0===this.compareTo(e))),ke(this,"isGreaterThanZero",(()=>this._amountInCents>0)),ke(this,"createCopyWithAdjustedAmount",(e=>new Ue(e(this._amountInCents),this._currency,!0))),this._currency=t,this._amountInCents=Ee(i,!0)(e),this._amountInUnits=Ee(i,!1)(e)}get currency(){return this._currency}asUnits(e){return ze(this._currency,e)(this._amountInUnits)}asCents(e){return ze(this._currency,e)(this._amountInCents)}}function Te(e){return new Ue(0,e??"EUR",!1)}function xe(e,t){if(e.length<=0)return t;if(1===e.length)return e[0];const i=[...e];return i.sort(Oe((e=>e),"HIGH_TO_LOW")),i[0]}function ze(e,t){switch(e){case"EUR":switch(t){case"EUR":return e=>e;case"USD":return Fe}break;case"USD":switch(t){case"EUR":return qe;case"USD":return e=>e}}}function Ee(e,t){return e===t?e=>e:e?Re:_e}function _e(e){return 100*e}function Re(e){return e/100}function Fe(e){return e/b()}function qe(e){return e*b()}function Oe(e,t){let i;switch(t){case"LOW_TO_HIGH":i=1;break;case"HIGH_TO_LOW":i=-1}return(t,n)=>i*e(t).compareTo(e(n))}const je=JSON.parse('{"T":{"K":[{"max":300,"increment":1,"cpms":{"1a5ue4g":1,"sekdmo":2,"1rx4em8":3,"1rncw0":4,"11a7dvk":5,"jixdds":6,"1j1hedc":7,"f33v9c":8,"1elnw8w":9,"wudvr4":10,"1wcxwqo":11,"67gv0g":12,"15q0w00":13,"nyqvi8":14,"1nhawhs":15,"cv7474":16,"1cdr56o":17,"umh4ow":18,"1u515og":19,"3zk3y8":20,"13i44xs":21,"lqu4g0":22,"1l9e5fk":23,"hb0mbk":24,"1gtknb4":25,"z2amtc":26,"1ykunsw":27,"8fdm2o":28,"17xxn28":29,"q6nmkg":30,"1pp7nk0":31,"9jbzls":32,"191w0lc":33,"ram03k":34,"1qt6134":35,"nozcw":36,"10690cg":37,"ieyzuo":38,"1hxj0u8":39,"dz5hq8":40,"1dhpips":41,"vqfi80":42,"1v8zj7k":43,"53ihhc":44,"14m2igw":45,"mushz4":46,"1mdciyo":47,"br8qo0":48,"1b9srnk":49,"tiir5s":50,"1t12s5c":51,"2vlqf4":52,"12e5reo":53,"kmvqww":54,"1k5frwg":55,"g728sg":56,"1fpm9s0":57,"xyc9a8":58,"1xgwa9s":59,"7bf8jk":60,"16tz9j4":61,"p2p91c":62,"1ol9a0w":63,"a3b6dc":64,"19lv7cw":65,"rul6v4":66,"1rd57uo":67,"17o64g":68,"10q8740":69,"iyy6m8":70,"1ihi7ls":71,"ej4ohs":72,"1e1ophc":73,"waeozk":74,"1vsypz4":75,"5nho8w":76,"1561p8g":77,"neroqo":78,"1mxbpq8":79,"cb7xfk":80,"1btryf4":81,"u2hxxc":82,"1tl1yww":83,"3fkx6o":84,"12y4y68":85,"l6uxog":86,"1kpeyo0":87,"gr1fk0":88,"1g9lgjk":89,"yibg1s":90,"1y0vh1c":91,"7vefb4":92,"17dygao":93,"pmofsw":94,"1p58gsg":95,"8zcsu8":96,"18hwtts":97,"qqmtc0":98,"1q96ubk":99,"3pslc":100,"zm9tkw":101,"huzt34":102,"1hdju2o":103,"df6ayo":104,"1cxqby8":105,"v6gbgg":106,"1up0cg0":107,"4jjaps":108,"1423bpc":109,"matb7k":110,"1ltdc74":111,"b79jwg":112,"1aptkw0":113,"syjke8":114,"1sh3lds":115,"2bmjnk":116,"11u6kn4":117,"k2wk5c":118,"1jlgl4w":119,"fn320w":120,"1f5n30g":121,"xed2io":122,"1wwx3i8":123,"6rg1s0":124,"16a02rk":125,"oiq29s":126,"1o1a39c":127,"ax9yio":128,"1aftzi8":129,"sojz0g":130,"1s74000":131,"21my9s":132,"11k6z9c":133,"jswyrk":134,"1jbgzr4":135,"fd3gn4":136,"1evnhmo":137,"x4dh4w":138,"1wmxi4g":139,"6hgge8":140,"1600hds":141,"o8qgw0":142,"1nrahvk":143,"d56pkw":144,"1cnqqkg":145,"uwgq2o":146,"1uf0r28":147,"49jpc0":148,"13s3qbk":149,"m0tpts":150,"1ljdqtc":151,"hl07pc":152,"1h3k8ow":153,"zca874":154,"1yuu96o":155,"8pd7gg":156,"187x8g0":157,"qgn7y8":158,"1pz78xs":159,"9tbkzk":160,"19bvlz4":161,"rkllhc":162,"1r35mgw":163,"xokqo":164,"10g8lq8":165,"ioyl8g":166,"1i7im80":167,"e95340":168,"1drp43k":169,"w0f3ls":170,"1viz4lc":171,"5di2v4":172,"14w23uo":173,"n4s3cw":174,"1mnc4cg":175,"c18c1s":176,"1bjsd1c":177,"tsicjk":178,"1tb2dj4":179,"35lbsw":180,"12o5csg":181,"kwvcao":182,"1kffda8":183,"gh1u68":184,"1fzlv5s":185,"y8buo0":186,"1xqvvnk":187,"7letxc":188,"173yuww":189,"pcouf4":190,"1ov8veo":191,"adarr4":192,"19vusqo":193,"s4ks8w":194,"1rn4t8g":195,"1hnri8":196,"1107shs":197,"j8xs00":198,"1irhszk":199,"et49vk":200,"1eboav4":201,"wkeadc":202,"1w2ybcw":203,"5xh9mo":204,"15g1am8":205,"nora4g":206,"1n7bb40":207,"cl7itc":208,"1c3rjsw":209,"uchjb4":210,"1tv1kao":211,"3pkikg":212,"1384jk0":213,"lguj28":214,"1kzek1s":215,"h110xs":216,"1gjl1xc":217,"ysb1fk":218,"1yav2f4":219,"85e0ow":220,"17ny1og":221,"pwo16o":222,"1pf8268":223,"99ce80":224,"18rwf7k":225,"r0meps":226,"1qj6fpc":227,"dpdz4":228,"zw9eyo":229,"i4zegw":230,"1hnjfgg":231,"dp5wcg":232,"1d7pxc0":233,"vgfwu8":234,"1uyzxts":235,"4tiw3k":236,"14c2x34":237,"mkswlc":238,"1m3cxkw":239,"bh95a8":240,"1azt69s":241,"t8j5s0":242,"1sr36rk":243,"2lm51c":244,"124660w":245,"kcw5j4":246,"1jvg6io":247,"fx2neo":248,"1ffmoe8":249,"xocnwg":250,"1x6wow0":251,"71fn5s":252,"16jzo5c":253,"ospnnk":254,"1ob9on4":255,"asa5ts":256,"1aau6tc":257,"sjk6bk":258,"1s247b4":259,"1wn5kw":260,"11f76kg":261,"jnx62o":262,"1j6h728":263,"f83ny8":264,"1eqnoxs":265,"wzdog0":266,"1whxpfk":267,"6cgnpc":268,"15v0oow":269,"o3qo74":270,"1nmap6o":271,"d06ww0":272,"1ciqxvk":273,"urgxds":274,"1ua0ydc":275,"44jwn4":276,"13n3xmo":277,"lvtx4w":278,"1ledy4g":279,"hg0f0g":280,"1gykg00":281,"z7afi8":282,"1ypughs":283,"8kderk":284,"182xfr4":285,"qbnf9c":286,"1pu7g8w":287,"9obsao":288,"196vta8":289,"rflssg":290,"1qy5ts0":291,"sos1s":292,"10b8t1c":293,"ijysjk":294,"1i2itj4":295,"e45af4":296,"1dmpbeo":297,"vvfaww":298,"1vdzbwg":299,"58ia68":300}},{"max":800,"increment":5,"cpms":{"1beskcg":305,"krvjls":310,"1xlw2yo":315,"a8az28":320,"10v7zsw":325,"wfehog":330,"1n2bif4":335,"3kkpvk":340,"1gel98g":345,"pro8hs":350,"1qe6n0g":355,"dk63nk":360,"14734e8":365,"t3jd34":370,"1jqgdts":375,"6wfugw":380,"1akts74":385,"jxwrgg":390,"1wrxatc":395,"da6i9s":400,"13x3j0g":405,"zha0w0":410,"1q471mo":415,"12odfk":420,"1dwowsg":425,"n9rw1s":430,"1tg2680":435,"gm1mv4":440,"178ynls":445,"s9kkxs":450,"1iwhlog":455,"62h2bk":460,"1c8rchs":465,"llubr4":470,"1yfuv40":475,"9ec6ww":480,"10197nk":485,"vlfpj4":490,"1m8cq9s":495,"2qlxq8":500,"1fkmh34":505,"oxpgcg":510,"1rumi9s":515,"f0lyww":520,"15niznk":525,"ujz8cg":530,"1l6w934":535,"8cvpq8":540,"18ze48w":545,"ich3i8":550,"1v6hmv4":555,"boqubk":560,"12bnv28":565,"xvucxs":570,"1oirdog":575,"1569s0":580,"1dz6t4w":585,"nc9se8":590,"1tik2kg":595,"gojj7k":600,"17bgjy8":605,"qo4wzk":610,"1hb1xq8":615,"4h1edc":620,"1anbojk":625,"k0ensw":630,"1wuf75s":635,"aus268":640,"11hp2ww":645,"x1vksg":650,"1noslj4":655,"471szk":660,"1h12ccg":665,"qe5bls":670,"1r0nq4g":675,"e6n6rk":680,"14tk7i8":685,"tq0g74":690,"1kcxgxs":695,"7iwxkw":700,"19tcwe8":705,"j6fvnk":710,"1w0gf0g":715,"cipmgw":720,"135mn7k":725,"ypt534":730,"1pcq5ts":735,"b7hmo":740,"1d580zk":745,"mib08w":750,"1solaf4":755,"fukr28":760,"16hhrsw":765,"sh29z4":770,"1j3zaps":775,"69yrcw":780,"1cg91j4":785,"ltc0sg":790,"1ynck5c":795,"9ltvy8":800}},{"max":2000,"increment":50,"cpms":{"u4zu9s":850,"244um8":900,"kzd8n4":950,"drnsow":1000,"z3jkzk":1050,"5oqmf4":1100,"ojz0g0":1150,"c2ha80":1200,"r1vcw0":1250,"45sutc":1300,"j56xhc":1350,"ftbsw0":1400,"w6nugw":1450,"8bmrk0":1500,"nxhxc0":1550,"a22874":1600,"sxam80":1650,"wfmkg":1700,"lflkw0":1750,"f6ups0":1800,"y233sw":1850,"4na58g":1900,"qke2gw":1950,"coydc0":2000}},{"max":3500,"increment":100,"cpms":{"2uz9c0":2100,"hkdqm8":2200,"70t62o":2300,"93q4g0":2400,"1m1340":2500,"dw14ao":2600,"6ec2yo":2700,"be4ruo":2800,"3hgcg0":2900,"gix9fk":3000,"8g035s":3100,"axwfls":3200,"ebv28":3300,"eoqy9s":3400,"5j4cn4":3500}}]},"L":{"K":[{"max":2000,"increment":25,"cpms":{"v_1gtknb4":25,"v_tiir5s":50,"v_1vsypz4":75,"v_3pslc":100,"v_16a02rk":125,"v_m0tpts":150,"v_1mnc4cg":175,"v_et49vk":200,"v_18rwf7k":225,"v_xocnwg":250,"v_1ua0ydc":275,"v_58ia68":300,"v_10v7zsw":325,"v_pro8hs":350,"v_1jqgdts":375,"v_da6i9s":400,"v_1dwowsg":425,"v_s9kkxs":450,"v_1yfuv40":475,"v_2qlxq8":500,"v_15niznk":525,"v_ich3i8":550,"v_1oirdog":575,"v_gojj7k":600,"v_1anbojk":625,"v_x1vksg":650,"v_1r0nq4g":675,"v_7iwxkw":700,"v_135mn7k":725,"v_mib08w":750,"v_1j3zaps":775,"v_9ltvy8":800,"v_1fs464g":825,"v_u4zu9s":850,"v_1uri8sg":875,"v_244um8":900,"v_18af4sg":925,"v_kzd8n4":950,"v_1n9t7gg":975,"v_drnsow":1000,"v_1a73cao":1025,"v_z3jkzk":1050,"v_1t2bqbk":1075,"v_5oqmf4":1100,"v_znirr4":1125,"v_ojz0g0":1150,"v_1lkmozk":1175,"v_c2ha80":1200,"v_1ecx91c":1225,"v_r1vcw0":1250,"v_1x85n28":1275,"v_45sutc":1300,"v_14sb9c0":1325,"v_j56xhc":1350,"v_1pbh7nk":1375,"v_ftbsw0":1400,"v_1ctzhfk":1425,"v_w6nugw":1450,"v_1rtdk3k":1475,"v_8bmrk0":1500,"v_12aeww0":1525,"v_nxhxc0":1550,"v_1hwa2o0":1575,"v_a22874":1600,"v_1g8cidc":1625,"v_sxam80":1650,"v_1wlojy8":1675,"v_wfmkg":1700,"v_172pwqo":1725,"v_lflkw0":1750,"v_1m23zeo":1775,"v_f6ups0":1800,"v_195mv40":1825,"v_y233sw":1850,"v_1tostfk":1875,"v_4na58g":1900,"v_11nxts0":1925,"v_qke2gw":1950,"v_1kj67sw":1975,"v_coydc0":2000}},{"max":3000,"increment":50,"cpms":{"v_sdxwjk":2050,"v_2uz9c0":2100,"v_hudc00":2150,"v_hkdqm8":2200,"v_wjrta8":2250,"v_70t62o":2300,"v_mz5tkw":2350,"v_93q4g0":2400,"v_v0u1og":2450,"v_1m1340":2500,"v_kh9h4w":2550,"v_dw14ao":2600,"v_yf72m8":2650,"v_6ec2yo":2700,"v_p9kgzk":2750,"v_be4ruo":2800,"v_rchfcw":2850,"v_3hgcg0":2900,"v_juse0w":2950,"v_gix9fk":3000}},{"max":5000,"increment":100,"cpms":{"v_8g035s":3100,"v_axwfls":3200,"v_ebv28":3300,"v_eoqy9s":3400,"v_5j4cn4":3500,"v_ctboxs":3600,"v_29r4e8":3700,"v_gz5log":3800,"v_7ejlz4":3900,"v_9wfyf4":4000,"v_1rc4cg":4100,"v_dev2f4":4200,"v_5x6134":4300,"v_bvxatc":4400,"v_4e89hc":4500,"v_g1r7k0":4600,"v_7slaf4":4700,"v_aahmv4":4800,"v_pvn5s":4900,"v_ffa4g0":5000}}]}}'),Le=je.T.K,De=je.L.K,Me=Ye(Le,"USD",!0),Ne=Ye(De,"USD",!0);function Ve(e,t){return function(e,t){const i=Ze(e,t),n=Qe(e,t);if(n.isEq(e))return e;return new Ue((t.cents?n.asCents(t.currency):n.asUnits(t.currency))+i,t.currency,t.cents)}(e,t?Ne:Me)}function Ge(e){const t=e.asCents("USD");return{currency:"USD",value:Math.floor(t)}}function $e(e,t){return e.cpm}function We(e){return e.createCopyWithAdjustedAmount((e=>Math.round(e)))}function He(e){return""===e.amzniid&&"2"===e.amznbid&&"2"===e.amznp&&"0x0"===e.amznsz}const Ke=function(e,i){const{amznbid:n}=e,s=function(e){for(const t of Le){const i=t.cpms[e];if(void 0!==i)return new Ue(i,"USD",!0)}for(const t of De){const i=t.cpms[e];if(void 0!==i)return new Ue(i,"USD",!0)}return t.warn(`[apstag] Received an amazon bid with an encoded cpm (${e}) which is unknown. Will pretend the cpm is 0 for the bid`),new Ue(0,"USD",!0)}(n);return We(s.createCopyWithAdjustedAmount((e=>e*(1-i))))};function Ye(e,t,i){const n=e.filter((e=>e.max>0)).sort(((e,t)=>e.max-t.max)),s=[];for(let e=0;e<n.length;e++){const r=n[e],o=0===e?0:n[e-1].max,a=r.max;for(let e=o;e<a;){let n=e+r.increment;i||(n=We(new Ue(n,t,i)).asUnits(t)),s.push({min:e,max:Math.min(n,a),increment:r.increment}),e=n}}return{buckets:s,currency:t,cents:i}}function Ze(e,t){for(let i=0;i<t.buckets.length;i++){const n=t.buckets[i];if(e.isLt(new Ue(n.max,t.currency,t.cents)))return n.increment}return t.buckets[t.buckets.length-1].increment}function Qe(e,t){const i=new Ue(Ze(e,t),t.currency,t.cents).asCents(e.currency),n=Math.floor(e.asCents(e.currency));return new Ue(n-n%i,e.currency,!0)}const Je=[{max:10,increment:.01},{max:50,increment:.5},{max:100,increment:1}],Xe=Ye(Je,"EUR",!1),et=[{max:20,increment:.05},{max:50,increment:.1},{max:100,increment:1}],tt=Ye(et,"EUR",!1);function it(e,t){return i=>({precision:2,max:new Ue(i.max,e,t).asUnits("EUR"),increment:new Ue(i.increment,e,t).asUnits("EUR")})}const nt=Je.map(it(Xe.currency,Xe.cents)),st=et.map(it(tt.currency,tt.cents));function rt(e){const{cpm:t,...i}=e;return{...i,type:"PrebidBid",cpm:new Ue(t,"EUR",!1)}}function ot(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class at{static getInstance(){return this.instance||(this.instance=new at),this.instance}constructor(){ot(this,"blocklist",null),ot(this,"loadingPromise",null)}async filterBids(e,i){await this.loadBlocklist(),this.blocklist&&i&&Object.entries(i).forEach((i=>{let[n,{bids:s}]=i;s.forEach((i=>{this.isBidBlocked(i)&&(t.debug("blocking bid",i),e.markWinningBidAsUsed({adId:i.adId}))}))}))}isDomainBlocked(e){if(!this.blocklist)return!1;const{names:t,domains:i}=this.blocklist,n=e.split(".");if(i.some((e=>{if(n.length<e.length)return!1;const t=n.length-e.length;return e.every(((e,i)=>n[i+t]===e))})))return!0;return t.some((e=>!(n.length<e.length)&&e.every(((e,t)=>n[t]===e))))}loadBlocklist(){return this.blocklist?Promise.resolve():(this.loadingPromise||(this.loadingPromise=new Promise((e=>{o.e(698).then(o.t.bind(o,5698,19)).then((t=>{const{names:i,domains:n}=t.default;this.blocklist={names:i.map((e=>e.split("."))),domains:n.map((e=>e.split(".")))},this.loadingPromise=null,e()})).catch((i=>{t.error("error loading blocklist",i),this.loadingPromise=null,e()}))}))),this.loadingPromise)}isBidBlocked(e){const{advertiserDomains:t}=e.meta||{};return!!t&&t.some((e=>this.isDomainBlocked(e)))}}ot(at,"instance",void 0);const dt=at;function ct(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ut{constructor(e){ct(this,"adserverRequestSent",void 0),ct(this,"state",void 0),ct(this,"auctioneers",void 0),this.adserverRequestSent=!1,this.auctioneers=e,this.state=e.reduce(((e,t)=>Object.assign({},e,{[t]:null})),{})}setAuctioneerFinished(t){this.auctioneers.indexOf(t)<0&&(e.warn(`[RequestManager] Unexpected auctioneer ${t}`),this.auctioneers.push(t)),this.state[t]=Date.now()}haveBiddersFinished(){return this.auctioneers.every((e=>!!this.state[e]))}}let lt,ht,pt,gt,mt,ft,bt;!function(e){e[e.VAST1=1]="VAST1",e[e.VAST2=2]="VAST2",e[e.VAST3=3]="VAST3",e[e.VAST1Wrapper=4]="VAST1Wrapper",e[e.VAST2Wrapper=5]="VAST2Wrapper",e[e.VAST3Wrapper=6]="VAST3Wrapper",e[e.VAST4=7]="VAST4",e[e.VAST4Wrapper=8]="VAST4Wrapper",e[e.DAAST1=9]="DAAST1",e[e.DAAST1Wrapper=10]="DAAST1Wrapper",e[e.VAST4_1=11]="VAST4_1",e[e.VAST4_1Wrapper=12]="VAST4_1Wrapper",e[e.VAST4_2=13]="VAST4_2",e[e.VAST4_2Wrapper=14]="VAST4_2Wrapper"}(lt||(lt={})),function(e){e[e.VPAID1=1]="VPAID1",e[e.VPAID2=2]="VPAID2",e[e.MRAID1=3]="MRAID1",e[e.ORMAA=4]="ORMAA",e[e.MRAID2=5]="MRAID2",e[e.MRAID3=6]="MRAID3",e[e.OMID_1_0=7]="OMID_1_0",e[e.SIMID_1_0=8]="SIMID_1_0",e[e.SIMID_1_1=9]="SIMID_1_1"}(ht||(ht={})),function(e){e[e.INSTREAM=1]="INSTREAM",e[e.OUTSTREAM=2]="OUTSTREAM"}(pt||(pt={})),function(e){e[e.INSTREAM=1]="INSTREAM"}(gt||(gt={})),function(e){e[e.INSTREAM=1]="INSTREAM"}(mt||(mt={})),function(e){e[e.INSTREAM=1]="INSTREAM"}(ft||(ft={})),function(e){e[e.CLICK_WITH_SOUND=3]="CLICK_WITH_SOUND"}(bt||(bt={}));class vt{constructor(e,t){var i,n,s;this.code=e,s=void 0,(n="config")in(i=this)?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s;const{rules:r,...o}=c.getBidderConfig(e)||{};this.config={...{cost:0,discrepancy:0,...o},...t},this.logConfig(this.config)}setBidding(e,i,n,s){const r=n||this.defaultConfig(),o=this.getBidderSettings(r,i);this.isBidderEnabledForUnit(i,o,s)?(n||t.warn(`[${this.code}] missing request unit config, bravely continuing with default config`),this.checkSettings(o,i),this.createBidsForUnit(e,i,o,s)):t.debug(`[${this.code}] disabled for unit ${i.code()}`)}isPrebidBidder(){return!1}getConfig(){return{...this.config}}checkVideoSettings(e,t){}checkBannerSettings(e,t){}checkSettings(e,t){const{cost:i,discrepancy:n}=e;this.warnIfNotSet("cost",i),this.warnIfNotSet("discrepancy",n),t.checkBidderSettings(e,this)}getBidderSettings(e,t){return Object.assign({},this.config,e)}warn(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];t.warn(`[${this.code}Bidder] ${e}`,...n)}warnIfNotSet(e,t){null!=t&&""!==t||this.warnWrongVariable(e,t)}warnWrongVariable(e,t){this.warn(`${e} incorrectly set`,t)}isNumber(e){return"number"==typeof e&&!isNaN(e)}isBidderEnabledForUnit(e,i,n){const{enabled:s}=i;return s?c.isBidderEnabledForSession(this.code,n.clientInfo,e.isBanner()?"banner":"video"):(t.debug(`bidder ${this.code} not enabled because of ads request config`),!1)}defaultConfig(){return{bidder:this.code}}logConfig(e){t.debug(`[${this.code}] ${JSON.stringify(e)}`)}}function yt(e){return"number"==typeof e?()=>e:e}function wt(e){return e.asUnits("EUR")}const At=Ye([{max:2,increment:.01},{max:10,increment:.05},{max:20,increment:.1},{max:50,increment:1}],"EUR",!1),St=new Ue(At.buckets[At.buckets.length-1].max,At.currency,At.cents);function Bt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Pt=class{constructor(e){Bt(this,"impressionKey","impression_number"),Bt(this,"priceFloorKey","pf"),Bt(this,"unit",void 0),Bt(this,"pageIdentifier",void 0),Bt(this,"prebidPriceFloor",void 0),Bt(this,"googlePriceFloor",void 0),Bt(this,"hasAdsense",void 0),Bt(this,"hasAdsenseRendered",void 0),Bt(this,"prebidBids",void 0),Bt(this,"amazonDiscrepancy",void 0),Bt(this,"apstagSlotIds",[]),this.hasAdsense=!1,this.hasAdsenseRendered=!1,this.prebidPriceFloor=null,this.googlePriceFloor=null,this.prebidBids=[],this.amazonDiscrepancy=0,this.pageIdentifier=e}setAdsense(){this.hasAdsense=!0}hasAdsenseBid(){return this.hasAdsense}setAdsenseRendered(){this.hasAdsenseRendered=!0}hasAdsenseBidRendered(){return this.hasAdsense&&this.hasAdsenseRendered}resetPriceFloorsAndBids(){this.prebidPriceFloor=null,this.googlePriceFloor=null,this.prebidBids=[]}shouldRenderBid(e){const t=this.currentWinningPrebidBid(),i=this.getAmazonBid();return this.applyFilterFn(this.prebidBidResponseToBidInfo(t),e)||this.applyFilterFn(this.amazonBidResponseToBidInfo(i),e)}applyFilterFn(e,t){if(!t)return!0;if(!e)return!1;try{return t(e)}catch(e){}return!0}addPrebidBid(e){this.prebidBids.push(e)}getBidsForPrebid(){return this.prebidBids}getPrebidUnits(){if(0===this.prebidBids.length)return[];return[this.toPrebidUnit()]}toPrebidUnit(){const e=this.getPrebidPriceFloorObject(this.getPrebidPriceFloor()),t=this.unit.code();return{...{...this.unit.requestUnit.adUnit,code:t},bids:this.getBidsForPrebid(),floors:e,ortb2Imp:{ext:{gpid:t+(void 0!==this.pageIdentifier&&ie.getInstance().getExperimentValueAsBoolean(Q)?`#${this.pageIdentifier}`:"")}}}}currentWinningPrebidBid(){const e=this.getHighestPrebidBidResponses();if(0===e.length)return null;const t=[...e];return t.sort(Oe((e=>e.cpm),"HIGH_TO_LOW")),t[0]}getHighestPrebidBidResponses(){const e=R();return void 0===e?[]:e.getHighestCpmBids(this.unit.code()).map(rt)}prebidBidResponseToBidInfo(e){return e?{cpm:wt(e.cpm),rendered:"rendered"===e.status,bidder:e.bidderCode,code:this.unit.code()}:null}getPrebidPriceFloor(){return this.prebidPriceFloor||(this.prebidPriceFloor=this.computePrebidPriceFloor()),this.prebidPriceFloor}computePrebidPriceFloor(){const e=this.getHighestWinningBid();return this.computeRequestPriceFloor(e?[e]:[])}getPrebidPriceFloorObject(e){if(null===e)return;const{currency:t,value:i}=function(e){return{currency:"USD",value:e.asUnits("EUR")}}(e);return{currency:t,default:i,schema:{fields:["mediaType"]},values:{[this.isBanner()?"banner":"video"]:i}}}processAmazonBid(e){const t=Ke(e,this.amazonDiscrepancy),i=(this.computeApsPriceFloor()||Te()).createCopyWithAdjustedAmount((e=>e*(1-this.amazonDiscrepancy)));return t.isGte(We(i))?{...e,cpm:t,type:"AmazonBid"}:null}setAmazonDiscrepancy(e){this.amazonDiscrepancy=e}computeApsPriceFloor(){const e=this.getHighestWinningBid(),i=this.computeRequestPriceFloor(e?[e]:[]);if(!i)return null;const n=i.createCopyWithAdjustedAmount((e=>e/(1-this.amazonDiscrepancy)));t.debug("Amazon pricefloor (EUR)",i.asUnits("EUR")),t.debug("Amazon pricefloor with discrepancy, before bucketing (USD)",n.asUnits("USD"));const s=Ve(n,this.isVideo());return t.debug("Amazon pricefloor after bucketing (USD)",s.asUnits("USD")),s}amazonBidResponseToBidInfo(e){return e?{cpm:wt(e.cpm),rendered:!1,bidder:"amazon",code:e.slotID}:null}getHighestWinningBid(){const e=this.getWinningBids();return 0===e.length?null:e.sort(Oe((e=>e.cpm),"HIGH_TO_LOW"))[0]}getWinningBids(){return[this.getAmazonBid(),this.currentWinningPrebidBid()].filter(P)}getGooglePriceFloor(){return this.googlePriceFloor&&this.googlePriceFloor.isGreaterThanZero()?this.googlePriceFloor:this.getPrebidPriceFloor()}calculateAndSetGooglePriceFloor(e){const t={current:this.googlePriceFloor??Te(),prebid:Te(),amazon:Te()},i=e([this.currentWinningPrebidBid()].filter(P));if(i&&(t.prebid=Qe(i,this.getPrebidPriceBuckets())),ie.getInstance().getExperimentValueAsBoolean(Y)){const i=e([this.getAmazonBid()].filter(P));i&&(t.amazon=i)}this.googlePriceFloor=xe([t.current,t.prebid,t.amazon],Te())}priceFloorTargeting(e){return function(e){let t=Qe(e,At);return t.isGte(St)&&(t=St),t.asUnits("EUR").toFixed(2)}(e)}computeRequestPriceFloor(e){if(this.unit.requestUnit.noPriceFloor||this.unit.requestOptions.noPriceFloor)return null;const t={bids:e.map((e=>{switch(e.type){case"AmazonBid":return this.amazonBidResponseToBidInfo(e);case"PrebidBid":return this.prebidBidResponseToBidInfo(e)}})).filter(P)};return this.applyPriceFloorFunctions(t)}applyPriceFloorFunctions(e){const t=this.unit.requestUnit.priceFloor,i=this.unit.requestOptions.priceFloor,n=[S.advertising.priceFloor,i,t].filter(P).map(yt);if(0===n.length)return null;const s=n.reduce(((e,t)=>i=>t(i,e)),void 0),r=s(e);return null===r?null:new Ue(r,"EUR",!1)}};function It(e){const t=[],{video:i,native:n,banner:s}=e.mediaTypes;return i&&t.push(i.playerSize.slice()),n&&n.image&&t.push(...n.image.sizes.map((e=>e.slice()))),s&&t.push(...s.sizes.map((e=>e.slice()))),t}const Ct=Object.values({appnexus:"138242044687",ix:"138241895930",pubmatic:"138241896683",rubicon:"138241885337",sharethrough:"138382194304",venatus:"138367023875",rise:"138427190788",stroeerCore:"138436849730",mediafuse:"138468109427",iionads:"138473836137",webads:"138474573619",goldbach:"138479636654",smilewanted:null,beintoo:"138499252194",seedtag:"138480188935",adbility:"138493637146",richaudience:"138498646392",mediasquare:"138502108936",ozone:null}).filter((e=>null!==e)),kt=["138340379973","138340379976","138340320638","138340379970","138340320629","138340320635","138340379967","138340379961","138340379964","138340320632"];function Ut(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Tt{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Ut(this,"disableFailingPrebidBidders",void 0),Ut(this,"disableFailingAmazonPartners",void 0),Ut(this,"allowedErrorsWithoutGettingBlacklisted",void 0),Ut(this,"disabledPrebidBidders",new Map),Ut(this,"disabledAmazonPartners",new Map),this.allowedErrorsWithoutGettingBlacklisted=i,this.disableFailingPrebidBidders=e,this.disableFailingAmazonPartners=t}getAdditionalGAMKeyValuePairs(){return{num_disabled_prebid:this.disableFailingPrebidBidders?`${this.disabledPrebidBidders.size}`:void 0,num_disabled_amazon:this.disableFailingAmazonPartners?`${this.disabledAmazonPartners.size}`:void 0}}isBidderBlacklisted(e){return this._isPrebidBidderCodeBlacklisted(e.code)}_isPrebidBidderCodeBlacklisted(e){const t=this.disabledPrebidBidders.get(e);return this.isBlacklisted(t)}isAmazonBidBlacklisted(e){const t=this.extractAmazonPartner(e);return void 0!==t&&this._isAmazonPartnerBlacklisted(t)}_isAmazonPartnerBlacklisted(e){const t=this.disabledAmazonPartners.get(e);return this.isBlacklisted(t)}isBlacklisted(e){return void 0!==e&&e>this.allowedErrorsWithoutGettingBlacklisted}asBlacklistedAmazonPartnerFilter(){return e=>!this.disabledAmazonPartners.has(e)}createVideoCallback(e,t){return i=>{const n=xt({prebid:void 0!==e.prebid?{adUnitCode:e.prebid.adUnitCode,bidderCode:e.prebid.bidderCode,cpm:(s=e.prebid,r=!0,Qe(s.cpm,r?tt:Xe))}:void 0,amazon:void 0!==e.amazon?{amzniid:e.amazon.amzniid,amznp:this.extractAmazonPartner(e.amazon),cpm:$e(e.amazon)}:void 0},{usedCreatives:i.creativeIds,error:i.forceMarkAsUsed??!1});var s,r;this._handleVideoUsageInformation(n,t)}}_handleVideoUsageInformation(e,t){e.prebid&&(e.prebid.addToBlacklist?this.handlePrebidBidError(e.prebid.adUnitCode,e.prebid.bidderCode):e.prebid.used&&(this.markPrebidBidAsUsed(e.prebid.adUnitCode),this.handlePrebidBidSuccess(e.prebid.bidderCode))),e.amazon&&(e.amazon.addToBlacklist?this.handleAmazonBidError(t.code,e.amazon.amzniid,e.amazon.amznp):e.amazon.used&&(this.markAmazonBidAsUsed(e.amazon.amzniid),this.handleAmazonBidSuccess(e.amazon.amznp)))}markPrebidBidAsUsed(e){try{t.debug("[CrazyAds] Marking winning Prebid video as used",e);const i=F();i.adUnits.find((t=>t.code===e))||t.error("[CrazyAds] Adunit not found for bid",e),i.markWinningBidAsUsed({adUnitCode:e})}catch(i){t.error(i,"[CrazyAds] Failed to mark winning video bid as used",e)}}markAmazonBidAsUsed(e){}handlePrebidBidSuccess(e){if(this.disableFailingPrebidBidders&&this.disabledPrebidBidders.has(e)){this.disabledPrebidBidders.delete(e)&&t.debug(`[CrazyAds] Resetting the error count for prebid bidder ${e} since the bidder served a successful ad`)}}handlePrebidBidError(e,i){if(this.disableFailingPrebidBidders){if(t.debug(`[CrazyAds] Incrementing the error count of prebid bidder ${i} for video ads since the ad threw an error on ad unit ${e}`),this.disabledPrebidBidders.set(i,(this.disabledPrebidBidders.get(i)??0)+1),this._isPrebidBidderCodeBlacklisted(i)){t.debug(`[CrazyAds] Disabling prebid bidder ${i} for video ads since it threw too many errors`),g.getInstance().sendDisableBidderEvent({bidder:i,unit:e});const n=F(),s=n.adUnits.filter((e=>void 0!==e.mediaTypes.video)).map((e=>e.code));for(const r of s){const s=n.getBidResponsesForAdUnitCode(r).bids;for(const o of s)o.bidderCode===i&&(t.debug(`[CrazyAds] Marking video bid of bidder ${o.bidderCode} as used on ad unit ${r} because the video failed on ad unit ${e}`),n.markWinningBidAsUsed({adUnitCode:r,adId:o.adId}))}}}else this.markPrebidBidAsUsed(e)}handleAmazonBidSuccess(e){if(void 0!==e){if(this.disableFailingAmazonPartners&&this.disabledAmazonPartners.has(e)){this.disabledAmazonPartners.delete(e)&&t.debug(`[CrazyAds] Resetting the error count for amazon partner ${e} since the partner served a successful ad`)}}else t.warn("[CrazyAds] Cannot reset the error count for amazon partner with successful video ad because the amazon partner is unknown")}handleAmazonBidError(e,i,n){void 0!==n?(this.disableFailingAmazonPartners&&(t.debug(`[CrazyAds] Incrementing the error count of amazon partner ${n} for video ads since the ad ${i} threw an error`),this.disabledAmazonPartners.set(n,(this.disabledAmazonPartners.get(n)??0)+1),this._isAmazonPartnerBlacklisted(n)&&(t.debug(`[CrazyAds] Disabling amazon partner ${n} for video ads since it threw too many errors`),g.getInstance().sendDisableBidderEvent({bidder:n,unit:e}))),t.debug(`[CrazyAds] Marking video bid ${i} of partner ${n} as used because there was an error`),this.markAmazonBidAsUsed(i)):t.warn("[CrazyAds] Cannot disable amazon partner with failing video ad because the amazon partner is unknown")}reset(){this.disabledAmazonPartners.clear(),this.disabledPrebidBidders.clear()}extractAmazonPartner(e){return e.amznp}}function xt(e,t){const i={prebid:void 0!==e.prebid?{adUnitCode:e.prebid.adUnitCode,bidderCode:e.prebid.bidderCode,used:!1,addToBlacklist:!1}:void 0,amazon:void 0!==e.amazon?{amzniid:e.amazon.amzniid,amznp:e.amazon.amznp,used:!1,addToBlacklist:!1}:void 0};let n;let s;if(void 0!==e.prebid&&t.usedCreatives.some((e=>Ct.includes(e)))?(n="prebid",i.prebid&&(i.prebid.used=!0)):void 0!==e.amazon&&(e=>e.some((e=>kt.includes(e))))(t.usedCreatives)?(n="amazon",i.amazon&&(i.amazon.used=!0)):n="unknown",void 0!==e.prebid&&void 0!==e.amazon){const t=e.prebid.cpm,i=e.amazon.cpm;s=t.isGt(i)?"prebid":i.isGt(t)?"amazon":"unknown"}else s=void 0!==e.prebid?"prebid":void 0!==e.amazon?"amazon":"unknown";let r="unknown";switch("unknown"!==s&&"unknown"!==n&&s!==n?r=s:t.error&&(r="unknown"!==n?n:s),r){case"prebid":void 0!==i.prebid&&(i.prebid.addToBlacklist=!0);break;case"amazon":void 0!==i.amazon&&(i.amazon.addToBlacklist=!0)}return i}const zt=new Tt(!0,!1);function Et(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _t=class extends Pt{constructor(e,t){super(t),Et(this,"unit",void 0),Et(this,"nonSkippableMaxAdDurationKey","max_ad_duration"),Et(this,"skippableMaxAdDurationKey","sdmax"),Et(this,"videoTypeKey","vpos"),Et(this,"descriptionUrlKey","description_url"),Et(this,"prebidBids",void 0),Et(this,"apstagSlots",[]),Et(this,"amazonBid",void 0),Et(this,"googleBid",void 0),this.unit=e,this.prebidBids=[],this.amazonBid=null}isBanner(){return!1}isVideo(){return!0}resetPriceFloorsAndBids(){super.resetPriceFloorsAndBids(),this.removeApstagSlots(),this.amazonBid=null}getPrebidUnits(){const{placements:e}=this.unit.requestUnit.video;e||t.error("[VideoUnit] should have placements");const i=[];return Object.keys(e).forEach((e=>{this.unit.setCurrentPlacement(e);const t=this.toPrebidUnit();i.push(t)})),this.unit.setCurrentPlacement(null),i}getBidsForPrebid(){return this.prebidBids.filter((e=>e.placement===this.unit.getCurrentPlacement())).map((e=>{let{placement:t,...i}=e;return i}))}getHighestPrebidBidResponses(){if(this.unit.getCurrentPlacement())return super.getHighestPrebidBidResponses();{const{placements:e}=this.unit.requestUnit.video,t=Object.keys(e).reduce(((e,t)=>{this.unit.setCurrentPlacement(t);const i=super.getHighestPrebidBidResponses();return e.concat(i)}),[]);return this.unit.setCurrentPlacement(null),t}}toPrebidUnit(){const e=super.toPrebidUnit(),{mediaTypes:t}=e,{placements:i}=this.unit.requestUnit.video,n=this.unit.videoType(),s=this.unit.openRTB(i[this.unit.getCurrentPlacement()],n,!1),r=t.video,o=Object.assign({},r||{},s),a=Object.assign({},t,{video:o});return{...e,mediaTypes:a}}getAmazonBid(){return this.amazonBid}setAmazonBid(e){const t=e.filter((e=>!zt.isAmazonBidBlacklisted(e)));if(0===t.length)return;const i=t.filter((e=>e.cpm.isGreaterThanZero()));if(0===i.length)return;const n=i.reduce(((e,t)=>e.cpm.isGte(t.cpm)?e:t),i[0]);n.cpm.isGreaterThanZero()&&(this.amazonBid&&!this.amazonBid.cpm.isLt(n.cpm)||(this.amazonBid=n))}getApstagSlots(){return this.apstagSlots}setApstagSlots(){this.apstagSlots.forEach((e=>{const t=this.computeApsPriceFloor();t&&(e.floor=Ge(t))}))}addApstagSlot(e){this.apstagSlotIds.push(e),this.apstagSlots.push({slotID:e,mediaType:"video",sizes:this.unit.getSizes()})}removeApstagSlots(){this.apstagSlots=[],this.apstagSlotIds=[]}getPrebidAmazonBids(){const e=this.getCurrentWinningPrebidBids(),t=this.getAmazonBid();return t?{amazon:t,prebid:e}:{prebid:e}}getCurrentWinningPrebidBids(){try{return this.getHighestPrebidBidResponses()}catch(e){return console.error(e),[]}}setGoogleVideoBid(e,t){var i;const n=t?"skippableMaxDuration":"nonSkippableMaxDuration",s=(null===(i=this.googleBid)||void 0===i?void 0:i[n])||-1,{maxDuration:r=-1,...o}=e,a=Math.max(s,r);this.googleBid={...this.googleBid,...o,...a>0&&{[n]:a}}}async buildUrlWithConsent(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=await this.consentParams();return this.buildUrl(e,t,n,i)}highestPrebidBid(){const{placements:e}=this.unit.requestUnit.video,t=Object.keys(e).map((e=>{this.unit.setCurrentPlacement(e);return{bid:this.currentWinningPrebidBid(),placement:e}})),i=t.reduce(((e,t)=>{var i;return t.bid?null!==(i=e.bid)&&void 0!==i&&i.cpm&&e.bid.cpm.isGte(t.bid.cpm)?e:t:e}),t[0]);return this.unit.setCurrentPlacement(null),i}buildUrl(e,i,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{placement:r}=this.highestPrebidBid();this.unit.setCurrentPlacement(r);const o=this.unit.code(),a=(e.adUnits||[]).filter((e=>e.code===o));if(1!==a.length)throw new Error("[VideoUnit] Display video expected single unit");t.debug(`[VideoUnit] ${o} has highest bid`);const d=a[0],c={};Object.entries(s).forEach((e=>{let[t,i]=e;t&&i&&(c[t]=i)}));const u=this.getGooglePriceFloor(),l=u&&this.priceFloorTargeting(u);let h={};if(l){const e=parseFloat(l);h={pubf:Math.floor(1e6*e).toFixed(0)}}const p={iu:this.unit.requestUnit.slotId,ad_type:"video",tfcd:i.tfcd||0,trt:this.trt(),vad_type:"linear",plcmt:ft.INSTREAM,...n,...this.customUrlParams(),cust_params:{...c,...u&&{[this.priceFloorKey]:l},...h}};t.debug(`[VideoUnit] URL Params ${JSON.stringify(p)}`);const g=e.adServers.dfp.buildVideoUrl({adUnit:d,params:p});this.unit.setCurrentPlacement(null);const m=this.getAmazonBid();if(m){const e=new URL(g),t=`${e.searchParams.get("cust_params")}${m.qsParams}`;return e.searchParams.set("cust_params",t),e.toString()}return g}customUrlParams(){if(!this.unit.requestOptions.video||!this.unit.requestUnit.video)return{};if(!this.googleBid)return t.warn("[VideoUnit] Missing a google bid"),{};const e=this.unit.videoType(!0),{skippableMaxDuration:i,nonSkippableMaxDuration:n,descriptionUrl:s}=this.googleBid;return{...i&&{[this.skippableMaxAdDurationKey]:1e3*i},...n&&{[this.nonSkippableMaxAdDurationKey]:1e3*n},...e&&{[this.videoTypeKey]:this.videoTypeParam(e)},...s&&{[this.descriptionUrlKey]:s}}}videoTypeParam(e){switch(e){case"rewarded":case"preroll":return"preroll";case"midroll":return"midroll";default:return t.error(`[VideoUnit] Unexpected Video Type ${e}`),"preroll"}}trt(){return this.unit.requestOptions.trafficSource?"purchased"===this.unit.requestOptions.trafficSource?1:2:0}async consentParams(){var e;const t=me((null===(e=this.unit.requestOptions.clientInfo)||void 0===e?void 0:e.country)??null),i=await Ce.getInstance().getUspConsent(),n=i?{us_privacy:i.uspString}:{};if(t){return{...Ce.getInstance().hasTCFConsent()?{}:{npa:1},...n}}return{npa:0,...n}}getPrebidPriceBuckets(){return tt}};function Rt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ft=class{constructor(e,t){this.requestUnit=e,this.requestOptions=t,Rt(this,"numberOfRequests",void 0),Rt(this,"numberOfImpressions",void 0),Rt(this,"bids",void 0),Rt(this,"houseAdWasRenderedInRowCounter",0),this.numberOfRequests=1,this.numberOfImpressions=0}addApstagSlot(e){this.bids.addApstagSlot(e.slotID)}getApstagSlots(){return this.bids.getApstagSlots()}setApstagSlots(){this.bids.setApstagSlots()}addPrebidBid(e){this.bids.addPrebidBid(e)}resetForRender(e,t){this.bids.resetPriceFloorsAndBids(),this.requestUnit=e,this.requestOptions=t}elementId(){return this.code()}code(){return this.requestUnit.adUnit.code}setBids(t,i,n){if(this.bids.hasAdsenseBid()){const t=i.map((e=>e.code));e.debug(`[AdUnit] ${this.code()} ignoring ${t.join(" ")} bids due to adsense`)}else i.forEach((e=>this.setBidderBid(t,e,n)))}getSizes(){return It(this.requestUnit.adUnit)}maxSize(){const e=this.getSizes(),t=e.map((e=>e[0])),i=e.map((e=>e[1]));return[Math.max(...t),Math.max(...i)]}shouldRenderBid(e){return this.bids.shouldRenderBid(e)?this:void 0}isBanner(){return!1}isVideo(){return!1}getNumberOfRequests(){return this.numberOfRequests}getNumberOfImpressions(){return this.numberOfImpressions}getHouseAdWasRenderedInRowCounter(){return this.houseAdWasRenderedInRowCounter}setBidderBid(e,t,i){const n=(this.requestUnit.bidders||[]).find((e=>e.bidder===t.code));n?t.setBidding(e,this,n,i):t.setBidding(e,this,null,i)}};function qt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ot(e){return null!=e&&e.isVideo()}const jt=class extends Ft{constructor(e,t){super(e,t),qt(this,"bids",void 0),qt(this,"currentPlacement",null),this.bids=new _t(this,t.pageIdentifier)}canRender(){return!0}getBids(){return this.bids}mediaType(){return this.requestUnit.adUnit.mediaTypes.video}isVideo(){return!0}videoType(e){const t=this.requestUnit.video.videoType;return e||"midroll"!==t?t:"preroll"}bidParamsForBidder(e,t,i){return e.customVideoBidParams(t,this,i)}addPrebidBid(e){const t={...e,placement:this.currentPlacement};super.addPrebidBid(t)}code(){const e=super.code();return this.currentPlacement?`${e}-${this.currentPlacement}`:e}getAllCodes(){return Object.keys(this.requestUnit.video.placements).map((e=>this.codeWithPlacement(e)))}getCurrentPlacement(){return this.currentPlacement}setCurrentPlacement(e){this.currentPlacement=e}setBidderBid(t,i,n){const{placements:s}=this.requestUnit.video,r=this.videoType();s||e.error("[VideoUnit] should have placements"),Object.keys(s).forEach((e=>{this.currentPlacement=e;const o=s[e],a=this.openRTB(o,r,"google"===i.code),d=(o.bidders||[]).find((e=>e.bidder===i.code));d?i.setBidding(t,this,d,{...n,openRTB:a}):i.setBidding(t,this,null,{...n,openRTB:a})})),this.currentPlacement=null}checkBidderSettings(e,t){return t.checkVideoSettings(e,this)}invokeCallback(t,i){const{video:n}=this.requestUnit,s=n&&n.callback||i;if(!s)return;const r=this.bids.getPrebidAmazonBids();try{const e=this.bids.highestPrebidBid(),i=e.bid?e.placement:null,n=this.code(),o=i?this.codeWithPlacement(i):null,a=this.getAdsVideoCallback({prebid:(null==e?void 0:e.bid)??void 0,amazon:r.amazon??void 0},{code:o??n}),d=[];if(void 0!==r.amazon){const e=r.amazon,t={cpm:wt(e.cpm),bidder:"amazon",requestTimestamp:Date.now(),amzniid:e.amzniid,amznp:e.amznp};d.push(t)}r.prebid.forEach((e=>{const t={cpm:wt(e.cpm),bidder:e.bidderCode,responseTimestamp:e.responseTimestamp};d.push(t)})),s(t,n,d,o,a)}catch(t){e.error(`[VideoUnit] ${this.code()}, err in invoking callback`)}}openRTB(e,t,i){const{skippable:n}=e,s=e.maxDuration,r=e.googleMaxDuration||s,o=i?r:s,a=this.getStartdelay(t),d={...this.baseOpenRTB(),minduration:1,startdelay:a,...void 0!==o?{maxduration:o||15}:{},...void 0!==n?{skip:n?1:0}:{}};return n&&(d.skipafter=5),d}codeWithPlacement(e){return`${super.code()}-${e}`}getStartdelay(e){return"midroll"===e?-1:0}baseOpenRTB(){return{context:"instream",protocols:[lt.VAST1,lt.VAST2,lt.VAST3,lt.VAST2Wrapper,lt.VAST3Wrapper,lt.VAST4,lt.VAST4Wrapper],api:[ht.OMID_1_0,ht.SIMID_1_0,ht.VPAID2,ht.SIMID_1_1],mimes:["video/mp4","video/webm","video/quicktime","video/ogg","application/javascript"],linearity:pt.INSTREAM,minbitrate:10,maxbitrate:1e4,placement:gt.INSTREAM,plcmt:mt.INSTREAM,playbackmethod:[bt.CLICK_WITH_SOUND]}}getAdsVideoCallback(e,t){return zt.createVideoCallback(e,t)}};class Lt extends vt{constructor(e,t){var i,n,s;super(e,t),this.code=e,s=e=>{const{cost:t,discrepancy:i}=this.config;return function(e,t,i){return new Ue(e,"USD",!1).asUnits("EUR")*(1-t)*(1-i)}(e,t,i)},(n="adjust")in(i=this)?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s}isPrebidBidder(){return!0}getPrebidBidderSettings(){const e=Object.assign({},this.getAdjustment(),this.getCustomAdserverTargeting());return{[this.prebidCode()]:e}}getAdjustment(){return{bidCpmAdjustment:e=>this.adjust(e)}}getCustomAdserverTargeting(){return null}prebidCode(){return this.code}createBidsForUnit(e,t,i,n){const s=this.toBid(e,i,t,n);t.addPrebidBid(s)}checkSettings(e,t){super.checkSettings(e,t)}customBidParams(e,t,i){return t.bidParamsForBidder(this,e,i)}toBid(e,t,i,n){if(this.code!==t.bidder)throw new Error("[Bidder] wrong bidconfig");return{bidder:this.prebidCode(),params:this.bidParams(e,t,i,n)}}bidParams(e,i,n,s){const r=this.customBidParams(i,n,s);return t.debug(`[${this.code}] Bid Params:`,r),r}isBidderEnabledForUnit(e,i,n){const s=super.isBidderEnabledForUnit(e,i,n);return s&&Ot(e)&&zt.isBidderBlacklisted(this)?(t.debug(`bidder ${this.code} is on the blacklist for videos`),!1):s}}class Dt extends Lt{customBannerBidParams(e,t){return this.customUnitBidParams(e)}customVideoBidParams(e,t,i){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{tagId:i}=e;this.warnIfNotSet("tagId",i)}customUnitBidParams(e){const{tagId:t}=e;return{tagId:t}}}const Mt=class extends vt{createBidsForUnit(e,t,i){this.createBid(t,i)}createBid(e,i){const{slot:n,client:s}=i;if(!n)return void t.warn("[AdSense] missing slot");if(!s)return void t.error("[AdSense] missing client id");const r=e.code(),o=document.getElementById(r);if(!o)return void t.warn(`[AdSense] cannot find element ${r}`);const[a,d]=e.maxSize(),c=document.createElement("ins");c.setAttribute("class","adsbygoogle"),c.setAttribute("style",`display:inline-block;width:${a}px;height:${d}px`),c.setAttribute("data-ad-client",s),c.setAttribute("data-ad-slot",n),o.appendChild(c),e.getBids().setAdsense()}};class Nt extends vt{checkVideoSettings(e,t){super.checkVideoSettings(e,t);const{slotID:i}=e;this.warnIfNotSet("slotID",i)}createBidsForUnit(e,t,i,n){const{pubID:s,adServer:r,slotID:o,discrepancy:a}=i;e.setApstagConfig({pubID:s||"",adServer:r});const d=t.isVideo()?o:t.code();t.addApstagSlot({slotID:d||t.code()}),t.getBids().setAmazonDiscrepancy(a)}checkSettings(e,t){super.checkSettings(e,t);const{pubID:i,adServer:n}=e;this.warnIfNotSet("pubID",i),this.warnIfNotSet("adServer",n)}}class Vt extends Lt{customVideoBidParams(e,t,i){const n=this.customAdUnitParams(e,t.mediaType()),{maxduration:s,minduration:r,skip:o,api:a}=i.openRTB;return{...n,video:{maxduration:s,minduration:r,skippable:1===o,frameworks:a,context:"pre_roll"}}}customBannerBidParams(e,t){const i=t.mediaType();return this.customAdUnitParams(e,i)}checkSettings(e,t){super.checkSettings(e,t);const{placementId:i}=e;this.warnIfNotSet("placementId",i)}customAdUnitParams(e,t){const{pos:i}=t,{placementId:n}=e;return{placementId:`${n}`,allowSmallerSizes:!0,supplyType:"web",position:1===i?"above":void 0}}}class Gt extends Lt{customVideoBidParams(e,t,i){const n=t.mediaType();return this.customAdUnitParams(e,n)}customBannerBidParams(e,t){const i=t.mediaType();return this.customAdUnitParams(e,i)}checkSettings(e,t){super.checkSettings(e,t);const{placementId:i}=e;this.warnIfNotSet("placementId",i)}customAdUnitParams(e,t){const{pos:i}=t,{placementId:n}=e;return{placementId:`${n}`,allowSmallerSizes:!0,supplyType:"web",position:1===i?"above":void 0}}}class $t extends Lt{customVideoBidParams(e,t,i){const n=this.customAdUnitParams(e,t.mediaType()),{maxduration:s,minduration:r,skip:o,api:a}=i.openRTB;return{...n,video:{maxduration:s,minduration:r,skippable:1===o,frameworks:a,context:"pre_roll"}}}customBannerBidParams(e,t){const i=t.mediaType();return this.customAdUnitParams(e,i)}checkSettings(e,t){super.checkSettings(e,t);const{placementId:i}=e;this.warnIfNotSet("placementId",i)}customAdUnitParams(e,t){const{pos:i}=t,{placementId:n}=e;return{placementId:`${n}`,allowSmallerSizes:!0,supplyType:"web",position:1===i?"above":void 0}}}const Wt=e=>{const t=[...e];return t.sort(Oe((e=>e.cpm),"HIGH_TO_LOW")),0===t.length?null:new Ue(t[0].cpm.asUnits("EUR")-.01,"EUR",!1)};class Ht extends vt{createBidsForUnit(e,t,i,n){if(t.getBids().calculateAndSetGooglePriceFloor(Wt),t.isVideo()){const e=t.getBids(),s=n.openRTB,{descriptionUrl:r}=i,{maxduration:o}=s,a=1===s.skip,d={descriptionUrl:r,maxDuration:o};e.setGoogleVideoBid(d,a)}}isBidderEnabledForUnit(e,t,i){const n=super.isBidderEnabledForUnit(e,t,i);return e.isVideo()?n:(n||this.warn("disabling googlebidder for banners is not supported"),!0)}checkSettings(e,t){if(super.checkSettings(e,t),t.isVideo()){const{descriptionUrl:t}=e;t||this.warnIfNotSet("descriptionUrl",t)}}}class Kt extends Lt{customVideoBidParams(e,t,i){return this.customUnitBidParams(e)}customBannerBidParams(e,t){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{host:i,adUnitId:n,adUnitType:s,publisherId:r}=e;this.warnIfNotSet("host",i),this.warnIfNotSet("publisherId",r),this.warnIfNotSet("adUnitId",n),this.warnIfNotSet("adUnitType",s)}checkBannerSettings(e,t){super.checkBannerSettings(e,t);const{adUnitType:i}=e;"banner"!==i&&this.warnWrongVariable("adUnitType",i)}checkVideoSettings(e,t){super.checkVideoSettings(e,t);const{adUnitType:i}=e;"video"!==i&&this.warnWrongVariable("adUnitType",i)}customUnitBidParams(e){const{host:t,adUnitId:i,adUnitType:n,publisherId:s}=e;return{host:t,publisherId:s,adUnitId:i,adUnitType:n}}}class Yt extends Lt{customVideoBidParams(e,t,i){const n=this.customAdUnitParams(e,i),{openRTB:s}=i,r=(null==s?void 0:s.minduration)??4,o=(null==s?void 0:s.maxduration)??(null!=s&&s.skip?60:15),a=1===(null==s?void 0:s.skip)?15:void 0;return{...n,video:{...s,minduration:r,maxduration:o,skipmin:a}}}customBannerBidParams(e,t,i){return this.customAdUnitParams(e,i)}checkVideoSettings(e,t){super.checkVideoSettings(e,t)}createBidsForUnit(e,t,i,n){const{sizes:s}=i;s.forEach((s=>{const r=Object.assign({},i,{size:s.slice()}),o=this.toBid(e,r,t,n);t.addPrebidBid(o)}))}customAdUnitParams(e,t){const{siteId:i,size:n}=e;return this.warnIfNotSet("size",n),{siteId:`${i}`,size:n,pageUrl:t.pageUrl}}checkSettings(e,t){super.checkSettings(e,t);const{siteId:i}=e;this.warnIfNotSet("siteId",i)}}class Zt extends Lt{customVideoBidParams(e,t,i){return this.customUnitBidParams(e)}customBannerBidParams(e,t,i){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{placementId:i}=e;this.warnIfNotSet("placementId",i)}customUnitBidParams(e){const{placementId:t}=e;return{placementId:t}}}class Qt extends Lt{customBannerBidParams(e,t,i){return this.customUnitBidParams(e)}customVideoBidParams(e,t,i){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{owner:i,code:n}=e;this.warnIfNotSet("owner",i),this.warnIfNotSet("code",n)}customUnitBidParams(e){const{owner:t,code:i}=e;return{owner:t,code:i}}}class Jt extends Lt{customVideoBidParams(e,t,i){return{}}checkVideoSettings(e,t){super.checkVideoSettings(e,t),this.warn("should be disabled for videos")}customBannerBidParams(e,t){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{siteId:i,publisherId:n,placementId:s}=e;this.warnIfNotSet("siteId",i),this.warnIfNotSet("publisherId",n),this.warnIfNotSet("placementId",s)}customUnitBidParams(e){const{siteId:t,publisherId:i,placementId:n}=e;return{siteId:t,publisherId:i,placementId:n}}}class Xt extends Lt{customBannerBidParams(e,t,i){return this.customUnitBidParams(e,i)}customVideoBidParams(e,t,i){const{api:n,protocols:s,mimes:r,skip:o,...a}=i.openRTB;return{...this.customUnitBidParams(e,i),video:{...a,skip:o??0}}}createBidsForUnit(e,t,i,n){const{adSlot:s,addSizes:r=!0}=i,o=t.getSizes();return r&&s?void o.forEach((r=>{const[o,a]=r,d=`${s}@${o}x${a}`,c=Object.assign({},i,{adSlot:d}),u=this.toBid(e,c,t,n);t.addPrebidBid(u)})):super.createBidsForUnit(e,t,i,n)}customUnitBidParams(e,t){const{pageUrl:i}=t,{publisherId:n,adSlot:s}=e;return s?{publisherId:n||"",adSlot:s,kadpageurl:i}:{publisherId:n||"",kadpageurl:i}}checkSettings(e,t){super.checkSettings(e,t);const{publisherId:i}=e;this.warnIfNotSet("publisherId",i)}}class ei extends Lt{customBannerBidParams(e,t){return this.customUnitBidParams(e)}customVideoBidParams(e,t,i){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{pid:i,supplyType:n}=e;this.warnIfNotSet("pid",i),this.warnIfNotSet("supplyType",n)}customUnitBidParams(e){const{pid:t,supplyType:i}=e;return{pid:t,supplyType:i}}}class ti extends Lt{customBannerBidParams(e,t){return this.customUnitBidParams(e)}customVideoBidParams(e,t,i){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{org:i,placementId:n}=e;this.warnIfNotSet("org",i),this.warnIfNotSet("placementId",n)}customUnitBidParams(e){const{org:t,placementId:i,testMode:n}=e;return{org:t,placementId:i,testMode:n}}}class ii extends Lt{customBannerBidParams(e,t){const i=this.customUnitBidParams(e),{sizes:n}=e;return{...i,...n&&{sizes:n}}}customVideoBidParams(e,t,i){this.checkVideoSizeSetting(e);const{sizes:n,language:s}=e,r=this.customUnitBidParams(e),o=i.openRTB,a=n?n[0]:null;return{...r,...a&&{size_id:a},video:{...o,language:s||"en"}}}checkVideoSettings(e,t){super.checkVideoSettings(e,t);const{language:i}=e;this.warnIfNotSet("language",i)}customUnitBidParams(e){const{accountId:t,siteId:i,position:n,zoneId:s}=e;return{accountId:t||"",siteId:i||"",zoneId:s||"",...n&&{position:n}}}checkSettings(e,t){super.checkSettings(e,t);const{siteId:i,zoneId:n,accountId:s}=e;this.warnIfNotSet("siteId",i),this.warnIfNotSet("zoneId",n),this.warnIfNotSet("accountId",s)}checkVideoSizeSetting(e){const{sizes:t}=e;t&&1!==t.length&&this.warnWrongVariable("sizes",t)}}class ni extends Lt{customBannerBidParams(e,t){return this.customUnitBidParams(e)}customVideoBidParams(e,t,i){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{publisherId:i,adUnitId:n,placement:s}=e;this.warnIfNotSet("publisherId",i),this.warnIfNotSet("adUnitId",n),this.warnIfNotSet("placement",s)}customUnitBidParams(e){const{publisherId:t,adUnitId:i,placement:n}=e;return{publisherId:t,adUnitId:i,placement:n}}}class si extends Lt{customBannerBidParams(e,t){return this.customUnitBidParams(e)}customVideoBidParams(e,t,i){return this.customUnitBidParams(e)}customUnitBidParams(e){const{pkey:t}=e;return{pkey:t,iframe:!0}}checkSettings(e,t){super.checkSettings(e,t);const{pkey:i}=e;this.warnIfNotSet("pkey",i)}}class ri extends Lt{customVideoBidParams(e,t,i){return{}}checkVideoSettings(e,t){super.checkVideoSettings(e,t),this.warn("should be disabled for videos")}customBannerBidParams(e,t){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{zoneId:i}=e;this.warnIfNotSet("zoneId",i)}customUnitBidParams(e){const{zoneId:t}=e;return{zoneId:`${t}`}}}class oi extends Lt{customBannerBidParams(e,t){return this.customUnitBidParams(e)}customVideoBidParams(e,t,i){return this.customUnitBidParams(e)}checkSettings(e,t){super.checkSettings(e,t);const{sid:i}=e;this.warnIfNotSet("sid",i)}customUnitBidParams(e){const{sid:t}=e;return{sid:t}}}class ai extends Lt{customBannerBidParams(e,t,i){return this.customUnitBidParams(e,i)}customVideoBidParams(e,t,i){return this.customUnitBidParams(e,i)}checkBannerSettings(e,t){super.checkBannerSettings(e,t),this.warn("should be disabled for banners")}customUnitBidParams(e,t){const{pageUrl:i}=t,{AV_PUBLISHERID:n,AV_CHANNELID:s,AV_CGINFO:r}=e;return{AV_PUBLISHERID:n,AV_CHANNELID:s,AV_CGINFO:r,AV_URL:i}}checkSettings(e,t){super.checkSettings(e,t);const{AV_PUBLISHERID:i,AV_CHANNELID:n}=e;this.warnIfNotSet("AV_PUBLISHERID",i),this.warnIfNotSet("AV_CHANNELID",n)}}class di extends Lt{customVideoBidParams(e,t,i){const n=this.customUnitBidParams(e,t.mediaType()),{maxduration:s,minduration:r,skip:o,api:a}=i.openRTB;return{...n,video:{maxduration:s,minduration:r,skippable:1===o,frameworks:a,context:"pre_roll"}}}customBannerBidParams(e,t){const i=t.mediaType();return this.customUnitBidParams(e,i)}checkSettings(e,t){super.checkSettings(e,t);const{placementId:i,member:n}=e;this.warnIfNotSet("placementId",i),this.warnIfNotSet("member",n)}customUnitBidParams(e,t){const{placementId:i,member:n}=e,{pos:s}=t;return{placementId:i,member:n,allowSmallerSizes:!0,supplyType:"web",position:1===s?"above":void 0}}}class ci{static createBidder(e,t,i){const n=ae(e,i.bidders||[]),s=Object.assign({},t,n);switch(e){case"appnexus":return new Vt(e,s);case"google":return new Ht(e,s);case"ix":return new Yt(e,s);case"pubmatic":return new Xt(e,s);case"rubicon":return new ii(e,s);case"sharethrough":return new si(e,s);case"venatus":return new ai(e,s);case"rise":return new ti(e,s);case"stroeerCore":return new oi(e,s);case"mediafuse":return new Zt(e,s);case"amazon":return new Nt(e,s);case"adsense":return new Mt(e,s);case"iionads":return new Kt(e,s);case"webads":return new di(e,s);case"goldbach":return new $t(e,s);case"smilewanted":return new ri(e,s);case"beintoo":return new Gt(e,s);case"seedtag":return new ni(e,s);case"adbility":return new Dt(e,s);case"richaudience":return new ei(e,s);case"mediasquare":return new Qt(e,s);case"ozone":return new Jt(e,s)}}static createBidders(e,t){const i=ce().map((i=>{const n=ae(i,e.bidders||[]),s=Object.assign({code:i,video:{placements:{}}},n);return this.createBidder(i,s,t)}));let n=null,s=null,r=null;const o=[];return i.forEach((e=>{switch(e.code){case"google":n=e;break;case"amazon":s=e;break;case"adsense":r=e;break;default:return void o.push(e)}})),{google:this.checkIfFailedToCreate("google",n),amazon:this.checkIfFailedToCreate("amazon",s),prebid:o,adsense:this.checkIfFailedToCreate("adsense",r)}}static checkIfFailedToCreate(e,t){if(t)return t;throw new Error(`[BidderFactory] failed to create ${e}`)}}o(4155);async function ui(){try{await C("https://rafvertizing.crazygames.com/prebid.js")}catch(e){return t.debug('[Adblock] Adblock detected (our "prebid" failed to load)',e),!0}try{const e=!document.getElementById("AZJUSpftxLwH");return e&&t.debug("[Adblock] Adblock detected (no div)"),e}catch(e){return t.debug("[Adblock] Adblock detected"),!0}}function li(){return Promise.race([ui(),we(250,!1)])}let hi;const pi=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];hi&&!e||(hi=li());const t=await hi;return t};const gi=new class extends k{constructor(){super("blockthrough")}getScriptLocation(){return"https://btloader.com/tag?o=5635927334453248&upapi=true"}async shouldLoad(){return await pi()}};function mi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class fi{constructor(e,t){mi(this,"adRequester",void 0),mi(this,"requestManager",void 0),mi(this,"requestPromise",void 0),mi(this,"adUnits",void 0),mi(this,"options",void 0),mi(this,"bidders",void 0),mi(this,"prebidAdUnits",void 0),mi(this,"apstagSlots",void 0),mi(this,"requestTimeout",void 0),mi(this,"apstagRequestTimeoutHit",!1),mi(this,"advertisingConfig",void 0),mi(this,"adRequestResponse",{}),this.adRequester=e,this.advertisingConfig=t,this.adUnits=[],this.prebidAdUnits=null,this.apstagSlots=null,this.requestManager=new ut(["amazon","prebid"]),this.requestPromise=null,this.requestTimeout=t.timeout||1200}requestAds(e,i){return new Promise((async(n,s)=>{if(this.requestPromise={resolve:n,reject:s},0===e.length)return t.debug("[AdRequest] No renderable ad units requested"),void this.requestPromise.resolve(this.adRequestResponse);this.adUnits=e,this.options=i,this.createBidders(),this.adRequester.loadScripts((e=>{t.debug(`[AdRequest] ${e} failed to loaded`),this.adUnits&&this.auctioneerRequestFinished(e)}),!!i.disableBlockthrough),this.setTimeout(i),this.processAds()}))}async processAds(){this.setAdsenseBids(),this.adRequester.loadAdsenseIfBid(),this.setNonGoogleBids(),this.requestApstag(),this.requestPrebid()}async auctioneerRequestFinished(e){if(t.debug(`[AdRequest] ${e} finished`),this.requestManager.setAuctioneerFinished(e),this.requestManager.haveBiddersFinished()){var i;if(await this.initAdserver())null===(i=this.requestPromise)||void 0===i||i.resolve(this.adRequestResponse)}}setTimeout(e){const{timeout:t}=e;t&&(this.requestTimeout=t)}noAmazonBids(){return 0===this.getRequestedApstagSlots().length}noPrebidUnits(){return 0===this.getRequestedPrebidAdUnits().length}noPrebidBids(){const e=this.getRequestedPrebidAdUnits();return 0===e.length||e.every((e=>0===e.bids.length))}prebidBidders(){return this.bidders.prebid}createBidders(){this.bidders=ci.createBidders(this.advertisingConfig,this.options)}setAdsenseBids(){this.adRequester.setBidsForUnits(this.adUnits,this.options,[this.bidders.adsense])}setNonGoogleBids(){this.adRequester.setBidsForUnits(this.adUnits,this.options,[...this.bidders.prebid,this.bidders.amazon])}setAmazonBids(e){const t=e.filter((e=>"video"===e.mediaType)),i=e.filter((e=>"video"!==e.mediaType));this.setAmazonVideoBids(t),this.setAmazonBannerBids(i)}setAmazonVideoBids(e){const i=this.adUnits.filter(Ot);if(i.length>0){const n=i[0],s=e.map((e=>n.getBids().processAmazonBid(e))).filter(P);if(xe(s.map((e=>e.cpm)),Te()).isGreaterThanZero()){const e=n.code();this.adRequestResponse[e]=this.adRequestResponse[e]||{bids:[]},this.adRequestResponse[e].bids.push({bidder:"amazon"})}n.getBids().setAmazonBid(s),i.length>1&&t.warn("[apstag] got multiple video units, cant deal with those")}}setAmazonBannerBids(e){const i=this.adUnits.filter((e=>e.isBanner()));e.forEach((e=>{const{slotID:n}=e,s=i.find((e=>e.code()===n));if(!s)return void t.warn("[apstag] bid without matching unit");const r=s.getBids().processAmazonBid(e);r&&(r.cpm.isGreaterThanZero()&&(this.adRequestResponse[n]=this.adRequestResponse[n]||{bids:[]},this.adRequestResponse[n].bids.push({bidder:"amazon"})),s.getBids().setAmazonBid([r]))}))}requestPrebid(){this.noPrebidUnits()||this.adRequester.getPrebidFailedToLoad()?this.auctioneerRequestFinished("prebid"):_().que.push((()=>{this.setPrebidBidderSettings(),this.prebidAddAdUnits(),this.prebidRequestBids()}))}setPrebidBidderSettings(){const e=F(),t=this.prebidBidders().reduce(((e,t)=>Object.assign({},e,t.getPrebidBidderSettings())),{standard:{bidCpmAdjustment:e=>e,storageAllowed:!1}});e.bidderSettings=t}prebidAddAdUnits(){const e=F(),t=this.getRequestedPrebidAdUnits();t.forEach((t=>{e.removeAdUnit(t.code)})),e.addAdUnits(t)}prebidRequestBids(){const e=F();this.noPrebidBids()?this.auctioneerRequestFinished("prebid"):e.requestBids({adUnits:this.getRequestedPrebidAdUnits(),bidsBackHandler:async(t,i)=>{void 0!==t&&(Object.keys(t).forEach((e=>{this.adRequestResponse[e]=this.adRequestResponse[e]||{bids:[]};const i=t[e].bids.map((e=>({bidder:e.bidderCode})));this.adRequestResponse[e].bids.push(...i)})),await dt.getInstance().filterBids(e,t),this.auctioneerRequestFinished("prebid"))},timeout:this.requestTimeout})}getRequestedPrebidAdUnits(){return null===this.prebidAdUnits&&(this.prebidAdUnits=this.adRequester.getPrebidAdUnitsForUnits(this.adUnits)),this.prebidAdUnits}async requestApstag(){if(this.noAmazonBids()||this.adRequester.getApstagFailedToLoad())return void this.auctioneerRequestFinished("amazon");this.adRequester.loadAmazon((()=>{this.options.disableBlockthrough||gi.loadIfNeeded().catch((()=>{})),this.auctioneerRequestFinished("amazon")})),await this.adRequester.initializeApstag(this.options),await new Promise((e=>{setTimeout(e,100),requestAnimationFrame((()=>{setTimeout(e,0)}))}));let e=null;try{const i={slots:this.getRequestedApstagSlots(),timeout:this.requestTimeout};t.debug(`[apstag] ${JSON.stringify(i)}`),this.apstagRequestTimeoutHit=!1,e=window.setTimeout((()=>{t.debug("[apstag] timeout"),this.apstagRequestTimeoutHit=!0,this.auctioneerRequestFinished("amazon")}),this.requestTimeout+100),await this.setAmazonUser(),D().fetchBids(i,(i=>{e&&window.clearTimeout(e),this.apstagRequestTimeoutHit||(t.debug("[apstag] bids back"),i.forEach((e=>{t.debug(`[apstag]${He(e)?"(no bids available)":""} ${JSON.stringify(e)}`)})),this.setAmazonBids(i.filter((e=>!He(e)))),this.auctioneerRequestFinished("amazon"))}))}catch(i){t.error(i),e&&window.clearTimeout(e),this.auctioneerRequestFinished("amazon")}}async setAmazonUser(){var e,i;const n=null===(e=this.options.clientInfo)||void 0===e?void 0:e.country;if(!n||!fe(n))return;const{user:s}=this.options;if(!s)return;if(t.debug("[AdRequest] Setting user info",s),!s.email||null===(i=s.amazon)||void 0===i||!i.applicable)return new Promise((e=>{D().dpa(e)}));t.debug("[AdRequester] Setting email in apstag");const r={hashedRecords:[{type:"email",record:await async function(e){const t=(new TextEncoder).encode(e),i=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(i)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(s.email)}]};return new Promise((e=>{D().upa(r,e)}))}getRequestedApstagSlots(){return null===this.apstagSlots&&(this.apstagSlots=this.adRequester.getApstagSlotsForUnits(this.adUnits)),this.apstagSlots}async initAdserver(){var e;if(this.requestManager.adserverRequestSent)return!1;this.requestManager.adserverRequestSent=!0;const t=this.adUnits.filter(Ot);if(0===t.length)return!0;const i=null===(e=this.options.bidders)||void 0===e?void 0:e.filter((e=>"google"===e.bidder))[0],n={dfp:this.options.dfp,requestTimeout:this.options.timeout??this.requestTimeout,googleBidder:i,video:this.options.video,disableBlockthrough:this.options.disableBlockthrough,trafficSource:this.options.trafficSource};return await this.adRequester.renderBids(t,n),!0}}const bi=new class{constructor(){var e,t,i;i=void 0,(t="cache")in(e=this)?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,this.cache=new Map}getHighestBidForSlotIds(e,t){const i=[];for(const t of e){const e=this.getBidsForSlot(t);e.length>0&&i.push(...e)}const n=this.getBidsForSizes(i,t);return this.getHighestBid(n)}cacheBid(e,t){if(!e.cpm.isGreaterThanZero())return;const i={...e,receivedAt:Date.now(),used:!1,adFormat:t.adFormat},n=this.getBidsForSlot(e.slotID)||[];this.cache.set(e.slotID,[...n,i])}getBidsForSlot(e){const i=this.cache.get(e);if(!i)return[];const n=i.filter((e=>this.isValidBid(e)));return t.debug(`[AmazonBidCache] getBidsForSlot(${e})`,i,`${n.length} valid bids`),this.cache.set(e,n),n}markBidAsUsed(e){t.debug("[AmazonBidCache] markBidAsUsed",e);let i=null;return this.cache.forEach((n=>{n.forEach((n=>{n.amzniid===e&&(t.debug("[AmazonBidCache] Found bid to mark as used",n),n.used=!0,i=n)}))})),i}reset(){this.cache.clear()}getHighestBid(e){return 0===e.length?null:e.reduce(((e,t)=>t.cpm.isGt(e.cpm)||t.cpm.isEq(e.cpm)&&t.receivedAt<e.receivedAt?t:e),e[0])}isValidBid(e){const t="video"===e.adFormat?25e4:15e4,i=e.receivedAt+t;return Date.now()<i&&!e.used}getBidsForSizes(e,t){if(0===t.length)return e;const i=t.map((e=>`${e[0]}x${e[1]}`));return e.filter((e=>i.includes(e.amznsz)))}};function vi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const yi=class extends Pt{constructor(e,t){super(t),vi(this,"unit",void 0),vi(this,"slot",void 0),vi(this,"apstagSlot",void 0),this.unit=e}isBanner(){return!0}isVideo(){return!1}getMinPricePaidForUnit(e,t){var i;if(e||t)return Te();const n=(null===(i=this.currentWinningPrebidBid())||void 0===i?void 0:i.cpm)??Te(),s=this.getAmazonBid();return xe([n,(null==s?void 0:s.cpm)??Te(),this.prebidPriceFloor??Te()],Te())}resetPriceFloorsAndBids(){super.resetPriceFloorsAndBids(),this.removeApstagSlots()}getAmazonBid(){return t.debug(`[BannerBids] Unit: ${this.unit.code()}. Using Amazon bid cache with slot ids: ${this.apstagSlotIds}`),bi.getHighestBidForSlotIds(this.apstagSlotIds,this.unit.getSizes())}setAmazonBid(e){e.length>1&&t.warn(`[Bids] ${this.unit.code()} Multiple Amazon bids received for a banner when only one was expected`,e);const i=e[0];bi.cacheBid(i,{adFormat:"banner"})}getApstagSlots(){return this.apstagSlot?[this.apstagSlot]:void 0}setApstagSlots(){if(this.apstagSlot){const e=this.computeApsPriceFloor();e&&(this.apstagSlot.floor=Ge(e))}}addApstagSlot(e){this.apstagSlotIds.push(e);const{slotId:t}=this.unit.requestUnit;this.apstagSlot={slotID:e,slotName:t,sizes:this.unit.getSizes()}}removeApstagSlots(){this.apstagSlot=void 0,this.apstagSlotIds=[]}slotId(){return this.slot?this.slot.getAdUnitPath():null}getSlot(){if(!this.slot)throw new Error(`[AdUnit] ${this.unit.code()} expected to have googletag slot`);return this.slot}findSlot(e){if(this.slot)return this.slot;return j().pubads().getSlots().find((t=>t.getSlotElementId()===e))}defineSlot(){if(this.slot)return;const e=j();if(this.slot=e.defineSlot(this.unit.requestUnit.slotId,this.unit.getSizes(),this.unit.elementId()),this.slot)this.slot.addService(e.pubads());else{const e=this.findSlot(this.unit.elementId());this.slot=e}t.debug("[BannerBids] Created slot",this.slot)}markSlotAsDestroyed(){this.slot=void 0}setSlotTargeting(e){const t=this.getSlot(),i=this.getGooglePriceFloor(),n={[this.impressionKey]:e.toString()};return null!==i&&(n[this.priceFloorKey]=this.priceFloorTargeting(i)),t.updateTargetingFromMap(n),t}getPrebidPriceBuckets(){return Xe}};function wi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ai extends Ft{constructor(e,t){super(e,t),wi(this,"maxHouseAdRenderInRow",void 0),wi(this,"bids",void 0),wi(this,"unitHasBeenDisplayed",!1),wi(this,"unitIsFilled",!1),this.bids=new yi(this,t.pageIdentifier),this.maxHouseAdRenderInRow=4}getBids(){return this.bids}mediaType(){return this.requestUnit.adUnit.mediaTypes.banner}isBanner(){return!0}display(){this.unitHasBeenDisplayed||(this.unitHasBeenDisplayed=!0,j().display(this.elementId()))}bidParamsForBidder(e,t,i){return e.customBannerBidParams(t,this,i)}checkBidderSettings(e,t){return t.checkBannerSettings(e,this)}canRender(){return(0===this.numberOfImpressions||!this.getBids().hasAdsenseBidRendered())&&this.maxHouseAdRenderInRow>this.houseAdWasRenderedInRowCounter}async resetForRender(t,i){let n=!1;if(function(e,t){return t.some((t=>!e.some((e=>e[0]===t[0]&&e[1]===t[1]))))}(It(this.requestUnit.adUnit),It(t.adUnit))&&(e.debug("[AdRequester] Remaking slots because new unit contains different banner sizes"),await this.remakeSlot(),n=!0),super.resetForRender(t,i),!n&&this.numberOfImpressions>0&&this.numberOfImpressions%Ai.maxImpressionsBeforeRemakingSlots==0)return e.debug("[AdRequester] Remaking slots because of max impressions reached"),this.remakeSlot()}findSlot(){const{slotId:t}=this.requestUnit;return t||e.error(`[AdUnit] Missing Slotid for ${this.code()}`),this.bids.findSlot(this.elementId())}getSlot(){return this.bids.getSlot()}slotId(){return this.bids.slotId()}defineSlot(){const{slotId:t}=this.requestUnit;t||e.error(`[AdUnit] Missing Slotid for ${this.code()}`),this.bids.defineSlot()}markSlotAsDestroyed(){this.bids.markSlotAsDestroyed()}increaseNumberOfImpressions(){this.numberOfImpressions+=1}increaseNumberOfRequests(){this.numberOfRequests+=1}getUnitIsFilled(){return this.unitIsFilled}setUnitIsFilled(e){this.unitIsFilled=e}renderedNonHouseAd(){e.debug(`[BannerUnit] ${this.code()} rendered non house ad`),this.houseAdWasRenderedInRowCounter=0}renderedHouseAd(){e.debug(`[BannerUnit] ${this.code()} rendered house ad`),this.houseAdWasRenderedInRowCounter++}setSlotTargeting(){this.bids.setSlotTargeting(this.numberOfImpressions)}getMinPricePaidForUnit(e,t){return this.bids.getMinPricePaidForUnit(e,t)}invokeCallback(t,i,n,s,r){const{banner:o}=this.requestUnit,a=o&&o.callback||r;if(e.debug("[BannerUnit] invoking callback",a),a)try{a({empty:i,size:n,code:this.code(),slotId:this.bids.slotId(),houseAd:s,minPrice:wt(t)})}catch(t){e.error(`[BannerUnit] ${this.code()}, err in invoking callback`,t)}}remakeSlot(){return new Promise((e=>{O().cmd.push((()=>{const t=j(),i=this.findSlot();i&&(i.clearTargeting(),t.destroySlots([i]),this.markSlotAsDestroyed(),this.defineSlot()),e()}))}))}}wi(Ai,"houseAdWasRenderedTwiceInRowKey","house_ad_twice_row"),wi(Ai,"maxImpressionsBeforeRemakingSlots",64);const Si=Ai;const Bi=class{static createAdUnit(t,i){const{mediaTypes:n}=t.adUnit,s=!!n.video,r=!!n.banner;return r&&s&&e.warn(`[AdUnitFactory] ${t.adUnit.code} has multiple formats`),r?new Si(t,i):s?new jt(t,i):(e.error(`[AdUnitFactory] ${t.adUnit.code} has no supported formats`),null)}};function Pi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ii=new class{constructor(){Pi(this,"listeners",[]),Pi(this,"listenerInstalled",!1),Pi(this,"internalListener",(e=>{this.listeners.forEach((t=>{t(e)}))}))}removeAllListeners(){this.listeners=[],this.removeListener()}addListener(e){this.installListener(),this.listeners.push(e)}installListener(){if(this.listenerInstalled)return;this.listenerInstalled=!0;j().pubads().addEventListener("slotRenderEnded",this.internalListener)}removeListener(){if(!this.listenerInstalled)return;j().pubads().removeEventListener("slotRenderEnded",this.internalListener),this.listenerInstalled=!1}};function Ci(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ki=[138449654392,138233616993,138233616990,138233681903,138233616984,138233616981,138233681900,138233681897,138233738059,138233738062,138233681894],Ui=["amznactt","amznbid","amzniid","amznp","amznsz"],Ti={amznbid:2,amznp:2};const xi=class{constructor(){Ci(this,"renderListener",Ii),Ci(this,"googleTagEnabled",!1)}render(e,t,i,n,s,r,o){if(0===e.length)return Promise.resolve();const{adsenseUnits:a,amazonAndPrebidUnits:d}=this.groupAdunitsByType(e);if(a.length>0&&this.renderAdsense(a),0===d.length)return Promise.resolve();const c=d.reduce(((e,t)=>({...e,[t.code()]:t.getMinPricePaidForUnit(!1,!1)})),{}),u=this.processSlotRenderedEvent(e,B.advertiserIds||[],s,c);return new Promise((e=>{O().cmd.push((()=>{const s=j();this.renderListener.removeAllListeners(),this.renderListener.addListener(u),d.forEach((e=>e.increaseNumberOfImpressions())),s.pubads().clearTargeting(),_().que.push((async()=>{this.setAmazonTargeting(n),this.createDfpObjects(d,t,o),this.setPrebidTargeting(i),await this.showNonAdsenseAds(d,r),e()}))}))}))}renderAdsense(t){e.debug(`[BannerRenderer] Rendering AdSense for units: ${t.map((e=>e.code())).join(", ")}`),t.forEach((e=>{e.getBids().setAdsenseRendered(),M.getInstance().getAdsenseWindow().push({})}))}async showNonAdsenseAds(e,t){const i=j();await pi()&&!t&&await gi.loadIfNeeded(!0).catch((()=>{})),e.forEach((e=>e.display())),e.length>0&&i.pubads().refresh(e.map((e=>e.getSlot())))}createDfpObjects(e,t,i){this.enableGoogletag(i),this.createDfpTargets(e,t)}enableGoogletag(e){if(this.googleTagEnabled)return;this.googleTagEnabled=!0;const t=j();if(t.pubads().enableSingleRequest(),e){const i="organic"===e?t.enums.TrafficSource.ORGANIC:t.enums.TrafficSource.PURCHASED;t.pubads().setPrivacySettings({trafficSource:i})}t.enableServices()}createDfpTargets(e,t){Object.entries(t).forEach((e=>{let[t,i]=e;t&&i&&this.setDfpTarget(t,i)})),e.forEach((e=>e.setSlotTargeting()))}setDfpTarget(t,i){if(null==i)return;let n;e.debug(`[googletag] Target ${t} ${i}`),n=Array.isArray(i)?i.map((e=>`${e}`)):`${i}`,j().pubads().setTargeting(t,n)}setAmazonTargeting(t){0===t.length||t.forEach((t=>{const i=j().pubads().getSlots().find((e=>e.getSlotElementId()===t.slotID));if(i){const e=bi.getHighestBidForSlotIds([t.slotID],t.sizes);e?Ui.forEach((t=>{const n=e[t];n&&i.setTargeting(t,n)})):Object.entries(Ti).forEach((e=>{let[t,n]=e;i.setTargeting(t,n.toString())}))}else e.warn(`[BannerRenderer] No googletag slot found for apstag slot with ID ${t.slotID}`)}))}setPrebidTargeting(e){const t=F();0===e.length||(t.setTargetingForGPTAsync(e.map((e=>e.code))),t.registerSignalSources())}processSlotRenderedEvent(t,i,n,s){return r=>{const{advertiserId:o,slot:a}=r,d=t.filter((e=>e.slotId()===a.getAdUnitPath()));if(0===d.length)return void e.warn(`[BannerRenderer] No matching unit for slot ${a.getAdUnitPath()}`);if(d.length>1)return void e.warn(`[BannerRenderer] Multiple units (${d.length}) for slot ${a.getAdUnitPath()}`);const c=d[0];c.getBids().hasAdsenseBid()&&e.warn(`[BannerRenderer] Received a googletag slotRenderEnded event for a unit with an AdSense bid: ${c.code()}`),this.updateUnitFillState({unit:c,bannerOptions:n},{event:r,slot:a});const u=!c.getUnitIsFilled(),l={size:r.size,isEmpty:u},h=this.checkIfHouseAd(o,i,c);this.updateAmazonState(r),this.invokeUnitCallback(l,c,h,n.callback,s[c.code()])}}checkIfHouseAd(e,t,i){const n=null===e||t.some((t=>t===e));return n?i.renderedHouseAd():i.renderedNonHouseAd(),n}invokeUnitCallback(e,t,i,n,s){t.invokeCallback(s,e.isEmpty,e.size,i,n)}updateUnitFillState(e,t){const{unit:i,bannerOptions:n}=e,{event:s,slot:r}=t;if(!1===s.isEmpty)i.setUnitIsFilled(!0);else{var o,a;(null===(o=n.unitOptions)||void 0===o||null===(a=o[i.code()])||void 0===a?void 0:a.clearSlotIfEmpty)&&i.getUnitIsFilled()&&(j().pubads().clear([r]),i.setUnitIsFilled(!1))}}updateAmazonState(t){const i=t.slot.getSlotElementId(),n=t.slot.getTargeting("amzniid"),s=null==n?void 0:n[0];if(s){var r;const n=D().debug("getState"),o=t.slot.getResponseInformation(),a=o?t.slot.getHtml():"",d=!(!a.includes("apstag.renderImp")||!a.includes(s)),c=ki.includes((null==o?void 0:o.creativeId)??0);d!==c&&e.error(`[BannerRenderer] isAmazonWin (from the slot html) ${d} is not equal to isAmazonCreative (based on the banner creative ids) ${c}`),d&&bi.markBidAsUsed(s);((null==n||null===(r=n.slotBids)||void 0===r?void 0:r[i])||[]).forEach((e=>{const{bidConfig:t}=e;d&&t.amzniid===s&&(e.bidState="RENDERED"),(t.amzniid===s&&"RENDERED"!==e.bidState||t.amzniid!==s&&"SET"===e.bidState)&&(e.bidState="EXPOSED")}))}}groupAdunitsByType(e){const t=[],i=[];return e.forEach((e=>{e.getBids().hasAdsenseBid()?t.push(e):i.push(e)})),{adsenseUnits:t,amazonAndPrebidUnits:i}}};const zi=class{constructor(){}render(e,t,i){const{callback:n}=t;return e.forEach((e=>{const t=this.createRenderCallback(e,i);e.invokeCallback(t,n)})),Promise.resolve()}createRenderCallback(e,t){return i=>this.renderCallback(e,i,t)}async renderCallback(t,i,n){const s=await t.getBids().buildUrlWithConsent(F(),i,n);return e.debug(`[VideoRenderer] URL generated for ${t.code()}: ${s}`),s}};function Ei(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _i=class{constructor(){Ei(this,"videoRenderer",void 0),Ei(this,"bannerRenderer",void 0),Ei(this,"dfpParams",void 0),Ei(this,"videoOptions",void 0),Ei(this,"bannerOptions",void 0),this.videoRenderer=new zi,this.bannerRenderer=new xi,this.dfpParams=this.defaultDfpKeys(),this.videoOptions={},this.bannerOptions={}}async render(e,t,i,n){const{video:s,banner:r}=this.splitUnitsByType(e),o=this.createDfpPredefinedValues(t.requestTimeout||1200);this.dfpParams=Object.assign(this.defaultDfpKeys(),o,t.dfp),this.videoOptions=Object.assign(this.videoOptions,t.video),this.bannerOptions=Object.assign(this.bannerOptions,t.banner),await Promise.all([this.bannerRenderer.render(r,this.dfpParams,i,n,this.bannerOptions,!!t.disableBlockthrough,t.trafficSource),this.videoRenderer.render(s,this.videoOptions,this.dfpParams)])}splitUnitsByType(e){return e.reduce(((e,t)=>{let{video:i,banner:n}=e;return Ot(t)?{video:[...i,t],banner:n}:{video:i,banner:[...n,t]}}),{video:[],banner:[]})}defaultDfpKeys(){return Object.assign({},S.advertising.dfp||{})}createDfpPredefinedValues(e){return{timeout:`${e}`}}};const Ri=new class extends k{constructor(){super("Liveramp")}getScriptLocation(){return"https://ats-wrapper.privacymanager.io/ats-modules/f335ec38-f1f6-423b-8091-fe87576411ae/ats.js"}async shouldLoad(){return!0}};function Fi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class qi{constructor(e,t){Fi(this,"experimentSetups",void 0),Fi(this,"experiments",void 0),Fi(this,"getExperiments",(()=>{if(!P(this.experiments)){let e;for(e in this.experiments={},this.experimentSetups){const t=this.experimentSetups[e];this.experiments[e]=t.isEnabled()}}return this.experiments})),Fi(this,"onUserEmailChanged",(e=>{for(const t of ee)this.experimentSetups[t].onUserEmailChanged(e);this.experiments=void 0})),Fi(this,"onCountryChanged",(e=>{for(const t of ee)this.experimentSetups[t].onCountryChanged(e);this.experiments=void 0})),this.experimentSetups={[K]:new Li(K),[Y]:new ji(Y),[Z]:new ji(Z),[Q]:new ji(Q),[J]:new Di(J),[X]:new Mi(X)},Object.values(this.experimentSetups).forEach((i=>i.init(e,t)))}}class Oi{constructor(e){Fi(this,"experimentName",void 0),Fi(this,"enabled",!1),Fi(this,"email",void 0),Fi(this,"country",void 0),this.experimentName=e}init(e,t){this.email=e,this.country=t,this.enabled=this.calculateEnabledState()}isEnabled(){return this.enabled}onCountryChanged(e){this.country=e,this.enabled=this.calculateEnabledState()}onUserEmailChanged(e){this.email=e,this.enabled=this.calculateEnabledState()}calculateEnabledState(){return this.areConditionsMet(this.email,this.country)&&!!ie.getInstance().getExperimentValueAsBoolean(this.experimentName)}getEmail(){return this.email}getCountry(){return this.country}}class ji extends Oi{constructor(e){super(e)}areConditionsMet(e,t){return!0}}class Li extends Oi{constructor(e){super(e)}init(e,t){super.init(e,t),this.updateFlagOnWindow()}onCountryChanged(e){super.onCountryChanged(e),this.updateFlagOnWindow()}updateFlagOnWindow(){var e;(this.isEnabled()||null!==(e=window)&&void 0!==e&&e.liModuleEnabled)&&(window.liModuleEnabled=this.isEnabled())}areConditionsMet(e,t){return fe(t)||"CA"===t}}class Di extends Oi{constructor(e){super(e),Fi(this,"loaderPromise",void 0),Fi(this,"emailStored",!1)}init(e,t){super.init(e,t),this.setupLoaderPromise(),this.storeEmailOnWindow()}areConditionsMet(e,t){return!P(t)||["US","CA","MX","JP","HK","AU","NZ","ID","SG","AR","TW"].includes(t)}onCountryChanged(e){super.onCountryChanged(e),this.setupLoaderPromise()}onUserEmailChanged(e){super.onUserEmailChanged(e),this.storeEmailOnWindow()}setupLoaderPromise(){this.isEnabled()&&!P(this.loaderPromise)&&(this.loaderPromise=Ri.loadIfNeeded().catch((()=>{})))}storeEmailOnWindow(){const e=this.getEmail();!this.emailStored&&P(this.loaderPromise)&&P(e)&&(this.emailStored=!0,this.loaderPromise.then((()=>{window.ats.setAdditionalData({type:"email",id:e})})))}}class Mi extends Oi{constructor(e){super(e)}areConditionsMet(e,t){return!(!(i=t)||pe.indexOf(i)>=0||"GB"===t)&&P(e);var i}}function Ni(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Vi;!function(e){e.DOES_NOT_APPLY="1---",e.DEFAULT="1YNN"}(Vi||(Vi={}));class Gi{constructor(e){Ni(this,"config",void 0),Ni(this,"experimentsSetup",void 0),Ni(this,"amazonConfig",void 0),Ni(this,"prebidAdUnits",void 0),Ni(this,"adUnits",void 0),Ni(this,"renderer",void 0),Ni(this,"isApstagInitialized",void 0),Ni(this,"isPrebidInitialized",void 0),Ni(this,"isGoogletagInitialized",void 0),Ni(this,"prebidFailedToLoad",void 0),Ni(this,"apstagFailedToLoad",void 0),Ni(this,"lastUsedUserEmail",void 0),Ni(this,"lastUsedCountry",void 0),this.config=e,this.experimentsSetup=new qi(this.lastUsedUserEmail,this.lastUsedCountry),this.adUnits=[],this.prebidAdUnits=[],this.renderer=new _i,this.isApstagInitialized=!1,this.isPrebidInitialized=!1,this.isGoogletagInitialized=!1,this.prebidFailedToLoad=!1,this.apstagFailedToLoad=!1,O().cmd.push((()=>{const e=j();e.pubads().disableInitialLoad(),e.setConfig({threadYield:"ENABLED_ALL_SLOTS"})}))}requestAds(t,i){var n,s;return e.debug("[AdRequester] Requesting ads",t,"with options",i),this.updateLastUsedUserEmail((null===(n=i.user)||void 0===n?void 0:n.email)??void 0),this.updateLastUsedCountry((null===(s=i.clientInfo)||void 0===s?void 0:s.country)??void 0),this.isPrebidInitialized?this.updatePrebidConfig(i):this.setPrebidConfig(i),new Promise((async(n,s)=>{const r=[he(),A.waitTillLoaded()];t.units.some((e=>!!e.adUnit.mediaTypes.banner))&&r.push(N.loadIfNeeded().catch((()=>{i.disableBlockthrough||gi.loadIfNeeded().catch((()=>{}))}))),await Promise.allSettled(r),await this.createAndUpdateAdUnits(t,i);const o=t.codes??t.units.map((e=>e.adUnit.code)),a=this.selectRequestedUnits(o),d=new fi(this,this.config),c=await d.requestAds(a,i);e.debug("[AdRequester] Finished requesting ads with result",c),n(c)}))}reset(){this.adUnits=[],this.prebidAdUnits=[];const e=R();return void 0!==e&&e.removeAdUnit(),this.isPrebidInitialized=!1,this.isGoogletagInitialized=!1,this.destroyDfpSlots()}updateLastUsedUserEmail(e){const t=this.lastUsedUserEmail;this.lastUsedUserEmail=e,t!==this.lastUsedUserEmail&&(this.experimentsSetup.onUserEmailChanged(this.lastUsedUserEmail),this.updatePrebidUserIds())}updateLastUsedCountry(e){const t=this.lastUsedCountry;this.lastUsedCountry=e,t!==this.lastUsedCountry&&(this.experimentsSetup.onCountryChanged(this.lastUsedCountry),this.updatePrebidUserIds())}async createAndUpdateAdUnits(e,t){e.units.forEach((e=>{const i=e.adUnit.code,n=this.adUnits.map((e=>e.code())).indexOf(i);if(n>-1){const i=this.adUnits[n];if(i.isBanner())i.resetForRender(e,t),i.increaseNumberOfRequests();else{const i=Bi.createAdUnit(e,t);this.adUnits[n]=i}}}));const i=e.units.filter((e=>!this.adUnits.map((e=>e.code())).includes(e.adUnit.code))).map((e=>Bi.createAdUnit(e,t))).filter((e=>null!==e)),n=i.filter((e=>e.isBanner()));n.length>0&&await this.createDfpSlots(n),this.adUnits.push(...i)}selectRequestedUnits(t){const i=this.adUnits.filter((e=>t.includes(e.code()))),n=i.filter((e=>e.canRender()));return e.debug(`[AdRequester] Requesting ${i.length} units, of which ${n.length} can actually be rendered and will be included`,n.map((e=>e.code()))),n}addPrebidUnit(e){this.prebidAdUnits.push(e)}removePrebidUnit(e){this.prebidAdUnits=this.prebidAdUnits.filter((t=>t.code!==e))}setApstagConfig(e){this.amazonConfig=e}getPrebidFailedToLoad(){return this.prebidFailedToLoad}getApstagFailedToLoad(){return this.apstagFailedToLoad}getPrebidAdUnits(){return this.prebidAdUnits}setBidsForUnits(t,i,n){t.forEach((t=>{try{t.setBids(this,n,i);const e=t.getBids().getPrebidUnits();n.some((e=>"amazon"===e.code))&&t.setApstagSlots();(Ot(t)?t.getAllCodes():[t.code()]).forEach((e=>this.removePrebidUnit(e))),e.forEach((e=>this.addPrebidUnit(e)))}catch(i){e.error(`[AdRequest] ${t.code} error in setBids`,i)}}))}loadScripts(t,i){re.loadIfNeeded().catch((()=>{i||gi.loadIfNeeded(!0).catch((()=>{e.error("[AdRequester] Failed to load blockthrough")})),this.prebidFailedToLoad=!0,t("prebid")})),i||gi.loadIfNeeded().catch((()=>{e.error("[AdRequester] Failed to load blockthrough")}))}loadAdsenseIfBid(){this.adUnits.some((e=>e.getBids().hasAdsenseBid()))&&U.loadIfNeeded().catch((()=>{e.error("[AdRequester] failed to load adsense")}))}async loadAmazon(t){e.debug("[AdRequester] loading and initializing amazon");try{await T.loadIfNeeded()}catch(i){e.debug("[AdRequester] Apstag failed to load"),this.apstagFailedToLoad=!0,t()}}setPrebidConfig(e){this.isPrebidInitialized=!0;const{pageUrl:t}=e,i=this.getConsentConfig(e),n=this.getUserSyncConfig(e),s={useBidCache:!e.noBidCaching,bidCacheFilterFunction:(r=this.createPrebidBidCacheFilterFunction(),e=>{const t=rt(e);return r(t)})};var r;const o=this.getExperiments().hadron_exp_24?{realTimeData:{auctionDelay:2e3,dataProviders:[{name:"hadron",waitForIt:!0,params:{segmentCache:!1,partnerId:631}}]}}:{};_().que.push((()=>{var r;const a=F();ce().filter(de).forEach((e=>{const t=$i(e);null!==t&&a.aliasBidder(t.alias,e,{gvlid:t.gvlid})})),a.setConfig({...e.pbjsConfig,minBidCacheTTL:60,eventHistoryTTL:60,gptPreAuction:{enabled:!0,useDefaultPreAuction:!0},enableTIDs:!0,pageUrl:t||(null===(r=e.pbjsConfig)||void 0===r?void 0:r.pageUrl),ortb2:this.ortb2Config(e)||void 0,floors:{enforcement:{bidAdjustment:!0,enforceJS:!0,floorDeals:!0,enforcePBS:!0}},userSync:n,rubicon:{singleRequest:!0},...s,enableSendAllBids:!0,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},userIdTargeting:{GAM:!0},mediaTypePriceGranularity:{video:{buckets:st},banner:{buckets:nt}},timeoutBuffer:400,disableAjaxTimeout:!0,...i,sendBidsControl:{bidLimit:1},...o})}))}createPrebidBidCacheFilterFunction(){return e=>(e=>e.cpm.isGreaterThanZero())(e)&&(e=>e.responseTimestamp+1e3*e.ttl+1e3>(new Date).getTime())(e)}updatePrebidConfig(e){const{pageUrl:t}=e,i=this.getConsentConfig(e),n=this.getUserSyncConfig(e);_().que.push((()=>{var s;F().mergeConfig({...e.pbjsConfig,pageUrl:t||(null===(s=e.pbjsConfig)||void 0===s?void 0:s.pageUrl),ortb2:this.ortb2Config(e)||void 0,useBidCache:!e.noBidCaching,...i,...n})}))}getConsentConfig(e){var t;const i=null===(t=e.clientInfo)||void 0===t?void 0:t.country;if(!i)return{};if(me(i)){return{consentManagement:{gdpr:{cmpApi:"iab",timeout:1e3,defaultGdprScope:!0},usp:{timeout:0}}}}if(fe(i)){return{consentManagement:{usp:{timeout:1e3,cmpApi:"iab"}}}}return{consentManagement:{usp:{timeout:0}}}}getUserSyncConfig(e){const t={syncDelay:15e3,encryptedSignalSources:{sources:[{source:["criteo.com","adserver.org","id5-sync.com","sharedid.org"],encrypt:!1}]}},i=[{name:"criteo"},{name:"unifiedId",params:{partner:"c67xkla"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},{name:"id5Id",params:{partner:377},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}},{name:"sharedId",storage:{name:"sharedid",type:"cookie"},params:{syncTime:86400}},{name:"lotamePanoramaId"}],n=this.getExperiments(),s=n.uid2_exp,r=n[K],o=n[J],a=n.hadron_exp_24,{user:d}=e;return s&&null!=d&&d.email&&i.push({name:"uid2",params:{email:d.email,subscriptionId:"riMWtTJCBu",serverPublicKey:"UID2-X-P-MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEjW+JEvJ+KsLeM9aimChBr//9M5kuzJ1Xcl6oC1hQ7K6S6ezNd1odmmLwViFqhyhZaW3OdLk4DaSuacb3jQHQDQ=="}}),r&&i.push({name:"liveIntentId",params:{emailHash:(null==d?void 0:d.email)??"",publisherId:"84896",requestedAttributesOverrides:{pubmatic:!0,magnite:!0,index:!0,uid2:!0}},storage:{name:"__tamLIResolveResult",type:"html5",expires:1}}),o&&(i.push({name:"identityLink",params:{pid:"13431"},storage:{type:"html5",name:"idl_env",expires:1}}),i.push({name:"pairId",params:{liveramp:{storageKey:"_lr_pairId"}}})),a&&i.push({name:"hadronId",params:{partnerId:631}}),t.userIds=i,t.filterSettings={iframe:{bidders:["stroeerCore","ozone"],filter:"include"}},t}updatePrebidUserIds(){const t=R();if(!P(t))return;if(!P(this.lastUsedUserEmail))return;const i=this.getExperiments()??{},n=i[K],s=i.uid2_exp,r=i[J],o=[];s&&o.push("uid2"),n&&o.push("liveIntentId"),r&&(o.push("identityLink"),o.push("pairId")),e.debug("userIdsToRefresh",o),o.length>0&&t.refreshUserIds({submoduleNames:o})}ortb2Config(t){const{pageUrl:i,ortb2Site:n}=t,s=i||(null==n?void 0:n.page);if(!s)return null;try{const e=new URL(s);return{site:{...n||{},page:s,domain:e.host}}}catch(t){return e.error(`[AdRequester] Invalid pageUrl ${i}`),null}}async initializeApstag(t){if(this.isApstagInitialized)return;this.isApstagInitialized=!0;const{params:i,...n}=this.amazonConfig,s={...n,params:{...i,videoAdServer:"DFP",us_privacy:await this.apstagPrivacy(t)}};e.debug("[AdRequester] Settings apstag config",s),D().init(s)}async apstagPrivacy(t){var i;const n=null===(i=t.clientInfo)||void 0===i?void 0:i.country;if(!n)return Vi.DOES_NOT_APPLY;if(!fe(n))return Vi.DOES_NOT_APPLY;try{const e=await Ce.getInstance().getUspConsent();return(null==e?void 0:e.uspString)??Vi.DEFAULT}catch(t){return e.log(t),Vi.DEFAULT}}createDfpSlots(e){return e.length>0?this.isGoogletagInitialized?new Promise((t=>{O().cmd.push((()=>{e.forEach((e=>e.defineSlot())),t()}))})):(this.isGoogletagInitialized=!0,new Promise((t=>{O().cmd.push((()=>{j().pubads().setSafeFrameConfig({allowOverlayExpansion:!1,allowPushExpansion:!1,sandbox:!0}),e.forEach((e=>e.defineSlot())),t()}))}))):Promise.resolve()}destroyDfpSlots(){const e=this.adUnits.filter((e=>e.isBanner()));return 0===e.length?Promise.resolve():new Promise((t=>{O().cmd.push((()=>{const i=j(),n=e.map((e=>e.findSlot())).filter((e=>!!e));i.destroySlots(n),e.forEach((e=>e.markSlotAsDestroyed()));const s=i.pubads().getTargetingKeys(),r=["criteoId","id5id","tdid"];s.filter((e=>!r.includes(e))).forEach((e=>{i.pubads().clearTargeting(e)})),t()}))}))}async renderBids(t,i){const n="google",s={bidder:n,video:{placements:{}},...ae(n,this.config.bidders||[])},r=i;i.googleBidder&&(r.bidders=[i.googleBidder]);const o=ci.createBidder(n,s,r);this.setBidsForUnits(t,i,[o]);const a=t.map((e=>e.shouldRenderBid(i.filterFn))).filter((e=>!!e)),d=this.getPrebidAdUnitsForUnits(a),c=this.getApstagSlotsForUnits(a),u=a.some((e=>e.isVideo()))?"video":"banner";i.dfp=this.getGamKeyValues(i.dfp||{},u),e.debug("[AdRequester] Rendering bids",a,d,c),await this.renderer.render(t,i,d,c)}async renderBanners(t,i){const n=this.selectRequestedUnits(t);e.debug("[AdRequester] Rendering banners",t,i),e.debug("[AdRequester] Selected ad units",n),await this.renderBids(n,i)}getPrebidAdUnitsForUnits(e){const t=[];return e.forEach((e=>{if(Ot(e)){e.getAllCodes().forEach((e=>t.push(e)))}else t.push(e.code())})),this.getPrebidAdUnits().filter((e=>t.some((t=>t===e.code))))}getApstagSlotsForUnits(e){const t=[];return e.forEach((e=>{const i=e.getApstagSlots();i&&i.length>0&&t.push(...i)})),t}getExperiments(){return this.experimentsSetup.getExperiments()}getGamKeyValues(e,t){return{...e,...this.getExperimentGAMKeyValues(),...c.getIncrementalBidderGamKeys(t),...c.getSessionKVs(t)}}getExperimentGAMKeyValues(){const e=this.getExperiments()??{},t={};for(const i of ee){const n=e[i];void 0!==n&&(t[i]=`${n}`)}return Object.entries(zt.getAdditionalGAMKeyValuePairs()).forEach((e=>{let[i,n]=e;void 0!==n&&(t[i]=n)})),t}}function $i(e){switch(e){case"venatus":return{alias:"aniview",gvlid:26};case"iionads":return{alias:"limelightDigital",gvlid:1358};case"webads":return{alias:"appnexus",gvlid:601};case"goldbach":return{alias:"appnexus",gvlid:580};case"beintoo":return{alias:"appnexus",gvlid:618};case"adbility":return{alias:"nexx360",gvlid:738};case"appnexus":case"rubicon":case"ix":case"pubmatic":case"sharethrough":case"rise":case"stroeerCore":case"mediafuse":case"smilewanted":case"seedtag":case"richaudience":case"mediasquare":case"ozone":return null}}function Wi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Hi=class{constructor(){Wi(this,"queue",[]),Wi(this,"_adRequester",null)}queueRequest(e,t){return new Promise(((i,n)=>{const s={type:"request",options:t,request:e,deferred:{resolve:i,reject:n}};this.enqueue(s)}))}queueReset(){return new Promise(((e,t)=>{const i={type:"reset",options:{},request:{},deferred:{resolve:e,reject:t}};this.enqueue(i)}))}render(e,t){return this.adRequester.renderBanners(e,t)}enqueue(e){this.queue.push(e),1===this.queue.length&&this.processQueue()}async processQueue(){if(this.queue.length>0){const e=this.queue[0];try{const t=await this.processRequest(e);e.deferred.resolve(t)}catch(i){t.error(i),e.deferred.reject()}return this.queue.shift(),this.processQueue()}}processRequest(e){const{type:t}=e;if("request"===t){const t=e;return this.adRequester.requestAds(t.request,t.options)}return this.adRequester.reset()}get adRequester(){return this._adRequester||(this._adRequester=new Gi(S.advertising)),this._adRequester}};let Ki,Yi=!1;async function Zi(t,i){try{Ki||(Ki=new Hi);return await Ki.queueRequest(t,i)}catch(t){e.error(t)}}async function Qi(t,i){try{if(!Ki)throw new Error("[CrazyAds] Expected a request before a render");await Ki.render(t,i)}catch(t){e.error(t)}}e.debug("[CrazyGamesAds] Loaded Version 11.9.0");const Ji={requestAds:async function(t,i){try{const e=await Zi(t,i),n=t.codes||t.units.map((e=>e.adUnit.code));return await Qi(n,{...i,requestTimeout:i.timeout}),e}catch(t){e.error(t)}},requestOnly:Zi,reset:async function(){try{if(!Ki)throw new Error("[CrazyAds] Expected a request before a reset");await Ki.queueReset(),zt.reset()}catch(t){e.error(t)}},render:Qi,nextPage:function(){O().cmd.push((function(){j().destroySlots()})),Ki=new Hi},hasAdblock:pi,initAds:function(t){e.debug("initialising ads",t),Yi||(Yi=!0,g.getInstance().init(t),pi(),he(),re.loadIfNeeded().catch((e=>{})),A.fetchConfig())},getConsentInformation:function(e){return Ce.getInstance().getConsentInformation(e)},addConsentChangedListener:function(e){Ce.getInstance().addConsentListener(e)},removeConsentChangedListener:function(e){Ce.getInstance().removeConsentListener(e)}};window.CrazygamesAds=Ji})()})();